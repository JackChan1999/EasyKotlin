ç¬¬8ç«  å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFPï¼‰
===

> å€¼å°±æ˜¯å‡½æ•°ï¼Œå‡½æ•°å°±æ˜¯å€¼ã€‚æ‰€æœ‰å‡½æ•°éƒ½æ¶ˆè´¹å‡½æ•°ï¼Œæ‰€æœ‰å‡½æ•°éƒ½ç”Ÿäº§å‡½æ•°ã€‚

"å‡½æ•°å¼ç¼–ç¨‹", åˆç§°æ³›å‡½ç¼–ç¨‹, æ˜¯ä¸€ç§"ç¼–ç¨‹èŒƒå¼"ï¼ˆprogramming paradigmï¼‰ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•ç¼–å†™ç¨‹åºçš„æ–¹æ³•è®ºã€‚å®ƒçš„åŸºç¡€æ˜¯ Î» æ¼”ç®—ï¼ˆlambda calculusï¼‰ã€‚Î»æ¼”ç®—å¯ä»¥æ¥å—å‡½æ•°å½“ä½œè¾“å…¥ï¼ˆå‚æ•°ï¼‰å’Œè¾“å‡ºï¼ˆè¿”å›å€¼ï¼‰ã€‚

å’ŒæŒ‡ä»¤å¼ç¼–ç¨‹ç›¸æ¯”ï¼Œå‡½æ•°å¼ç¼–ç¨‹çš„æ€ç»´æ–¹å¼æ›´åŠ æ³¨é‡å‡½æ•°çš„è®¡ç®—ã€‚å®ƒçš„ä¸»è¦æ€æƒ³æ˜¯æŠŠé—®é¢˜çš„è§£å†³æ–¹æ¡ˆå†™æˆä¸€ç³»åˆ—åµŒå¥—çš„å‡½æ•°è°ƒç”¨ã€‚

å°±åƒåœ¨OOPä¸­ï¼Œä¸€åˆ‡çš†æ˜¯å¯¹è±¡ï¼Œç¼–ç¨‹çš„æ˜¯ç”±å¯¹è±¡äº¤åˆåˆ›é€ çš„ä¸–ç•Œï¼›
åœ¨FPä¸­ï¼Œä¸€åˆ‡çš†æ˜¯å‡½æ•°ï¼Œç¼–ç¨‹çš„ä¸–ç•Œæ˜¯ç”±å‡½æ•°äº¤åˆåˆ›é€ çš„ä¸–ç•Œã€‚

å‡½æ•°å¼ç¼–ç¨‹ä¸­æœ€å¤è€çš„ä¾‹å­è«è¿‡äº1958å¹´è¢«åˆ›é€ å‡ºæ¥çš„Lispäº†ã€‚Lispç”±çº¦ç¿°Â·éº¦å¡é”¡ï¼ˆJohn McCarthyï¼Œ1927-2011ï¼‰åœ¨1958å¹´åŸºäºÎ»æ¼”ç®—æ‰€åˆ›é€ ï¼Œé‡‡ç”¨æŠ½è±¡æ•°æ®åˆ—è¡¨ä¸é€’å½’ä½œç¬¦å·æ¼”ç®—æ¥è¡ç”Ÿäººå·¥æ™ºèƒ½ã€‚è¾ƒç°ä»£çš„ä¾‹å­åŒ…æ‹¬Haskellã€MLã€Erlangç­‰ã€‚ç°ä»£çš„ç¼–ç¨‹è¯­è¨€å¯¹å‡½æ•°å¼ç¼–ç¨‹éƒ½åšäº†ä¸åŒç¨‹åº¦çš„æ”¯æŒï¼Œä¾‹å¦‚ï¼šJavaScript, Coffee Scriptï¼ŒPHPï¼ŒPerlï¼ŒPython, Ruby, C# , Java ç­‰ç­‰ï¼ˆè¿™å°†æ˜¯ä¸€ä¸ªä¸æ–­å¢é•¿çš„åˆ—è¡¨ï¼‰ã€‚

å‡½æ•°å¼è¯­è¨€åœ¨Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰å¹³å°ä¸Šä¹Ÿè¿…é€Ÿåœ°å´­éœ²å¤´è§’ï¼Œä¾‹å¦‚Scala ã€Clojure ï¼› .NET å¹³å°ä¹Ÿä¸ä¾‹å¤–ï¼Œä¾‹å¦‚ï¼šF# ã€‚

å‡½æ•°ä½œä¸ºKotlinä¸­çš„ä¸€ç­‰å…¬æ°‘ï¼Œå¯ä»¥åƒå…¶ä»–å¯¹è±¡ä¸€æ ·ä½œä¸ºå‡½æ•°çš„è¾“å…¥ä¸è¾“å‡ºã€‚å…³äºå¯¹å‡½æ•°å¼ç¼–ç¨‹çš„æ”¯æŒï¼Œç›¸å¯¹äºScalaçš„å­¦é™¢æ´¾é£æ ¼ï¼ŒKotlinåˆ™æ˜¯çº¯çš„çš„å·¥ç¨‹æ´¾ï¼šå®ç”¨æ€§ã€ç®€æ´æ€§ä¸Šéƒ½è¦æ¯”Scalaè¦å¥½ã€‚

æœ¬ç« æˆ‘ä»¬æ¥ä¸€èµ·å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹ä»¥åŠåœ¨Kotlinä¸­ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹çš„ç›¸å…³å†…å®¹ã€‚

## 8.1 å‡½æ•°å¼ç¼–ç¨‹æ¦‚è¿°

![Kotlinæç®€æ•™ç¨‹](http://upload-images.jianshu.io/upload_images/1233356-cf2dacf5ac6dbf2c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³æ˜¯ä¸€ä¸ªéå¸¸å¤è€çš„æ€æƒ³ã€‚æˆ‘ä»¬ç®€è¿°å¦‚ä¸‹ï¼š

- æˆ‘ä»¬å°±ä»1900 å¹´ David Hilbert çš„ç¬¬ 10 é—®é¢˜ï¼ˆèƒ½å¦é€šè¿‡æœ‰é™æ­¥éª¤æ¥åˆ¤å®šä¸å®šæ–¹ç¨‹æ˜¯å¦å­˜åœ¨æœ‰ç†æ•´æ•°è§£ï¼Ÿï¼‰ å¼€å§‹è¯´èµ·å§ã€‚

- 1920ï¼ŒSchÃ¶nfinkelï¼Œç»„åˆå­é€»è¾‘(combinatory logic)ã€‚ç›´åˆ° Curry Haskell 1927 åœ¨æ™®æ—æ–¯é¡¿å¤§å­¦å½“è®²å¸ˆæ—¶é‡æ–°å‘ç°äº† Moses SchÃ¶nfinkel å…³äºç»„åˆå­é€»è¾‘çš„æˆæœã€‚Moses SchÃ¶nfinkelçš„æˆæœé¢„è¨€äº†å¾ˆå¤š Curry åœ¨åšçš„ç ”ç©¶ï¼Œäºæ˜¯ä»–å°±è·‘å»å“¥å»·æ ¹å¤§å­¦ä¸ç†Ÿæ‚‰Moses SchÃ¶nfinkelå·¥ä½œçš„Heinrich Behmannã€Paul Bernaysä¸¤äººä¸€èµ·å·¥ä½œï¼Œå¹¶äº 1930 å¹´ä»¥ä¸€ç¯‡ç»„åˆå­é€»è¾‘çš„è®ºæ–‡æ‹¿åˆ°äº†åšå£«å­¦ä½ã€‚Curry Brooks Haskell æ•´ä¸ªèŒä¸šç”Ÿæ¶¯éƒ½åœ¨ç ”ç©¶ç»„åˆå­ï¼Œå®é™…å¼€åˆ›äº†è¿™ä¸ªç ”ç©¶é¢†åŸŸï¼ŒÎ»æ¼”ç®—ä¸­ç”¨å•å‚æ•°å‡½æ•°æ¥è¡¨ç¤ºå¤šä¸ªå‚æ•°å‡½æ•°çš„æ–¹æ³•è¢«ç§°ä¸º Currying (æŸ¯é‡ŒåŒ–)ï¼Œè™½ç„¶ Curry åŒå­¦å¤šæ¬¡æŒ‡å‡ºè¿™ä¸ªå…¶å®æ˜¯ SchÃ¶nfinkel å·²ç»æå‡ºæ¥çš„ï¼Œä¸è¿‡å…¶ä»–äººéƒ½æ˜¯å› ä¸ºä»–ç”¨äº†æ‰çŸ¥é“ï¼Œæ‰€ä»¥è¿™åå­—å°±è¿™å®šä¸‹æ¥äº†ï¼›å¹¶ä¸”æœ‰ä¸‰é—¨ç¼–ç¨‹è¯­è¨€ä»¥ä»–çš„åå­—å‘½åï¼Œåˆ†åˆ«æ˜¯ï¼šCurry, Brooks, Haskellã€‚Curry åœ¨ 1928 å¼€å§‹å¼€å‘ç±»å‹ç³»ç»Ÿï¼Œä»–æçš„æ˜¯åŸºäºç»„åˆå­çš„ polymorphicï¼ŒChurch åˆ™å»ºç«‹äº†åŸºäºå‡½æ•°çš„ç®€å•ç±»å‹ç³»ç»Ÿã€‚

- 1929, å“¥å¾·å°”(Kurt GÃ¶del )å®Œå¤‡æ€§å®šç†ã€‚GÃ¶del é¦–å…ˆè¯æ˜äº†ä¸€ä¸ªå½¢å¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰å…¬å¼éƒ½å¯ä»¥è¡¨ç¤ºä¸ºè‡ªç„¶æ•°ï¼Œå¹¶å¯ä»¥ä»ä¸€è‡ªç„¶æ•°åè¿‡æ¥å¾—å‡ºç›¸åº”çš„å…¬å¼ã€‚è¿™å¯¹äºä»Šå¤©çš„ç¨‹åºå‘˜éƒ½æ¥è¯´ï¼Œæ•°å­—ç¼–ç ã€ç¨‹åºå³æ•°æ®è®¡ç®—æœºåŸç†æœ€æ ¸å¿ƒã€æœ€åŸºæœ¬çš„å¸¸è¯†ï¼Œåœ¨é‚£ä¸ªæ—¶ä»£å´è„‘æ´å¤§å¼€çš„åˆ›è§ã€‚

- 1933ï¼ŒÎ» æ¼”ç®—ã€‚ Church åœ¨ 1933 å¹´æå‡ºæ¥ä¸€å¥—ä»¥çº¯Î»æ¼”ç®—ä¸ºåŸºç¡€çš„é€»è¾‘ï¼Œä»¥æœŸå¯¹æ•°å­¦è¿›è¡Œå½¢å¼åŒ–æè¿°ã€‚ Î» æ¼”ç®—å’Œé€’å½’å‡½æ•°ç†è®ºå°±æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„åŸºç¡€ã€‚

- 1936ï¼Œç¡®å®šæ€§é—®é¢˜ï¼ˆdecision problemï¼Œå¾·æ–‡ Entscheidungsproblem (å‘éŸ³ [É›ntËˆÊƒaÉªÌ¯dÊŠÅ‹spÊoËŒbleËm]ï¼‰ã€‚ Alan Turing å’Œ Alonzo Churchï¼Œä¸¤äººåœ¨åŒåœ¨1936å¹´ç‹¬ç«‹ç»™å‡ºäº†å¦å®šç­”æ¡ˆã€‚

- 1935-1936è¿™ä¸ªæ—¶é—´æ®µä¸Šï¼Œæˆ‘ä»¬æœ‰äº†ä¸‰ä¸ªæœ‰æ•ˆè®¡ç®—æ¨¡å‹ï¼šé€šç”¨å›¾çµæœºã€é€šç”¨é€’å½’å‡½æ•°ã€Î»å¯å®šä¹‰ã€‚Rosser 1939 å¹´æ­£å¼ç¡®è®¤è¿™ä¸‰ä¸ªæ¨¡å‹æ˜¯ç­‰æ•ˆçš„ã€‚

- 1953-1957ï¼ŒFORTRAN (FORmula TRANslating )ï¼ŒJohn Backusã€‚1952 å¹´ Halcombe Laning æå‡ºäº†ç›´æ¥è¾“å…¥æ•°å­¦å…¬å¼çš„è®¾æƒ³ï¼Œå¹¶åˆ¶ä½œäº† GEORGEç¼–è¯‘å™¨æ¼”ç¤ºè¯¥æƒ³æ³•ã€‚å—è¿™ä¸ªæƒ³æ³•å¯å‘ï¼Œ1953 å¹´ IBM çš„ John Backus å›¢é˜Ÿç»™ IBM 704 ä¸»æœºç ”å‘æ•°å­¦å…¬å¼ç¿»è¯‘ç³»ç»Ÿã€‚ç¬¬ä¸€ä¸ª FORTRAN (FORmula TRANslating çš„ç¼©å†™)ç¼–è¯‘å™¨ 1957.4 æ­£å¼å‘è¡Œã€‚FORTRAN ç¨‹åºçš„ä»£ç è¡Œæ•°æ¯”æ±‡ç¼–å°‘20å€ã€‚FORTRAN çš„æˆåŠŸï¼Œè®©å¾ˆå¤šäººè®¤è¯†åˆ°ç›´æ¥æŠŠä»£æ•°å…¬å¼è¾“å…¥è¿›ç”µè„‘æ˜¯å¯è¡Œçš„ï¼Œå¹¶å¼€å§‹æ¸´æœ›èƒ½ç”¨æŸç§å½¢å¼è¯­è¨€ç›´æ¥æŠŠè‡ªå·±çš„ç ”ç©¶å†…å®¹è¾“å…¥åˆ°ç”µè„‘é‡Œè¿›è¡Œè¿ç®—ã€‚John Backus åœ¨1970å¹´ä»£æäº† FP è¯­è¨€ï¼Œ1977 å¹´å‘è¡¨ã€‚è™½ç„¶è¿™é—¨è¯­è¨€å¹¶ä¸æ˜¯æœ€æ—©çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œä½†ä»–æ˜¯ Functional Programming è¿™ä¸ªè¯å„¿çš„åˆ›é€ è€…ï¼Œ 1977 å¹´ä»–çš„å›¾çµå¥–æ¼”è®²é¢˜ä¸º[â€œCan Programming Be Liberated From the von Neumann Style? A Functional Style and its Algebra of Programsâ€]

- 1956ï¼Œ LISPï¼Œ John McCarthyã€‚John McCarthy 1956å¹´åœ¨ Dartmouthä¸€å° IBM 704 ä¸Šæäººå·¥æ™ºèƒ½ç ”ç©¶æ—¶ï¼Œå°±æƒ³åˆ°è¦ä¸€ä¸ªä»£æ•°åˆ—è¡¨å¤„ç†(algebraic list processing)è¯­è¨€ã€‚ä»–çš„é¡¹ç›®éœ€è¦ç”¨æŸç§å½¢å¼è¯­è¨€æ¥ç¼–å†™è¯­å¥ï¼Œä»¥è®°å½•å…³äºä¸–ç•Œçš„ä¿¡æ¯ï¼Œè€Œä»–æ„Ÿè§‰åˆ—è¡¨ç»“æ„è¿™ç§å½¢å¼æŒºåˆé€‚ï¼Œæ—¢æ–¹ä¾¿ç¼–å†™ï¼Œä¹Ÿæ–¹ä¾¿æ¨æ¼”ã€‚äºæ˜¯å°±åˆ›é€ äº†LISPã€‚æ­£å› ä¸ºæ˜¯åœ¨ IBM 704 ä¸Šå¼€æçš„ï¼Œæ‰€ä»¥ LISP çš„è¡¨å¤„ç†å‡½æ•°æ‰ä¼šæœ‰å¥‡è‘©çš„åå­—ï¼š car/cdr ä»€ä¹ˆçš„ã€‚å…¶å®æ˜¯å– IBM704 æœºå™¨å­—çš„ä¸åŒéƒ¨åˆ†ï¼Œc=content ofï¼Œr=register number, a=address part, d=decrement part ã€‚

### 8.1.1 é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ä¸é¢å‘å‡½æ•°ç¼–ç¨‹ï¼ˆFOPï¼‰

#### é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰

åœ¨OOPä¸­ï¼Œä¸€åˆ‡çš†æ˜¯å¯¹è±¡ã€‚

åœ¨é¢å‘å¯¹è±¡çš„å‘½ä»¤å¼ï¼ˆimperativeï¼‰ç¼–ç¨‹è¯­è¨€é‡Œé¢ï¼Œæ„å»ºæ•´ä¸ªä¸–ç•Œçš„åŸºç¡€æ˜¯ç±»å’Œç±»ä¹‹é—´æ²Ÿé€šç”¨çš„æ¶ˆæ¯ï¼Œè¿™äº›éƒ½å¯ä»¥ç”¨ç±»å›¾ï¼ˆclass diagramï¼‰æ¥è¡¨è¿°ã€‚ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹ï¼ˆDesign Patterns: Elements of Reusable Object-Oriented Softwareï¼Œä½œè€…ErichGammaã€Richard Helmã€Ralph Johnsonã€John Vlissidesï¼‰ä¸€ä¹¦ä¸­ï¼Œåœ¨æ¯ä¸€ä¸ªæ¨¡å¼çš„è¯´æ˜é‡Œéƒ½é™„ä¸Šäº†è‡³å°‘ä¸€å¹…ç±»å›¾ã€‚

OOP çš„ä¸–ç•Œæå€¡å¼€å‘è€…é’ˆå¯¹å…·ä½“é—®é¢˜å»ºç«‹ä¸“é—¨çš„æ•°æ®ç»“æ„ï¼Œç›¸å…³çš„ä¸“é—¨æ“ä½œè¡Œä¸ºä»¥â€œæ–¹æ³•â€çš„å½¢å¼é™„åŠ åœ¨æ•°æ®ç»“æ„ä¸Šï¼Œè‡ªé¡¶å‘ä¸‹åœ°æ¥æ„å»ºå…¶ç¼–ç¨‹ä¸–ç•Œã€‚

OOPè¿½æ±‚çš„æ˜¯ä¸‡äº‹ä¸‡ç‰©çš†å¯¹è±¡çš„ç†å¿µï¼Œè‡ªç„¶åœ°å¼±åŒ–äº†å‡½æ•°ã€‚ä¾‹å¦‚ï¼šå‡½æ•°æ— æ³•ä½œä¸ºæ™®é€šæ•°æ®é‚£æ ·æ¥ä¼ é€’ï¼ˆOOPåœ¨å‡½æ•°æŒ‡é’ˆä¸Šçš„çº¦æŸï¼‰ï¼Œæ‰€ä»¥åœ¨OOPä¸­æœ‰å„ç§å„æ ·çš„ã€äº”èŠ±å…«é—¨çš„è®¾è®¡æ¨¡å¼ã€‚

GoFæ‰€è‘—çš„ã€Šè®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹ä»é¢å‘å¯¹è±¡è®¾è®¡çš„è§’åº¦å‡ºå‘çš„ï¼Œé€šè¿‡å¯¹å°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€ç»„åˆç­‰æŠ€æœ¯çš„åå¤ä½¿ç”¨ï¼Œæç‚¼å‡ºä¸€äº›å¯é‡å¤ä½¿ç”¨çš„é¢å‘å¯¹è±¡è®¾è®¡æŠ€å·§ã€‚è€Œå¤šæ€åœ¨å…¶ä¸­åˆæ˜¯é‡ä¸­ä¹‹é‡ã€‚

å¤šæ€ã€é¢å‘æ¥å£ç¼–ç¨‹ã€ä¾èµ–åè½¬ç­‰æœ¯è¯­ï¼Œæè¿°çš„æ€æƒ³å…¶å®æ˜¯ç›¸åŒçš„ã€‚è¿™ç§åè½¬æ¨¡å¼å®ç°äº†æ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„è§£è€¦ã€‚è¿™æ ·çš„æ¶æ„æ˜¯å¥å£®çš„, è€Œä¸ºäº†å®ç°è¿™æ ·çš„å¥å£®ç³»ç»Ÿï¼Œåœ¨ç³»ç»Ÿæ¶æ„ä¸­åŸºæœ¬éƒ½éœ€è¦ä½¿ç”¨å¤šæ€æ€§ã€‚

ç»å¤§éƒ¨åˆ†è®¾è®¡æ¨¡å¼çš„å®ç°éƒ½ç¦»ä¸å¼€å¤šæ€æ€§çš„æ€æƒ³ã€‚æ¢ä¸€ç§è¯´æ³•å°±æ˜¯ï¼Œè¿™äº›è®¾è®¡æ¨¡å¼èƒŒåçš„æœ¬è´¨å…¶å®å°±æ˜¯OOPçš„å¤šæ€æ€§ï¼Œè€ŒOOPä¸­çš„å¤šæ€æœ¬è´¨ä¸Šåˆæ˜¯å—çº¦æŸçš„å‡½æ•°æŒ‡é’ˆã€‚

å¼•ç”¨Charlie Calvertså¯¹å¤šæ€çš„æè¿°: â€œå¤šæ€æ€§æ˜¯å…è®¸ä½ å°†çˆ¶å¯¹è±¡è®¾ç½®æˆä¸ºå’Œä¸€ä¸ªæˆ–æ›´å¤šçš„ä»–çš„å­å¯¹è±¡ç›¸ç­‰çš„æŠ€æœ¯ï¼Œèµ‹å€¼ä¹‹åï¼Œçˆ¶å¯¹è±¡å°±å¯ä»¥æ ¹æ®å½“å‰èµ‹å€¼ç»™å®ƒçš„å­å¯¹è±¡çš„ç‰¹æ€§ä»¥ä¸åŒçš„æ–¹å¼è¿ä½œã€‚â€

ç®€å•çš„è¯´ï¼Œå°±æ˜¯ä¸€å¥è¯ï¼šå…è®¸å°†å­ç±»ç±»å‹çš„æŒ‡é’ˆèµ‹å€¼ç»™çˆ¶ç±»ç±»å‹çš„æŒ‡é’ˆã€‚è€Œæˆ‘ä»¬åœ¨OOPä¸­çš„é‚£ä¹ˆå¤šçš„è®¾è®¡æ¨¡å¼ï¼Œå…¶å®å°±æ˜¯åœ¨OOPçš„å¤šæ€æ€§çš„çº¦æŸè§„åˆ™ä¸‹ï¼Œå¯¹è¿™äº›å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨æ¨¡å¼çš„æ€»ç»“ã€‚

å¾ˆå¤šè®¾è®¡æ¨¡å¼ï¼Œåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­éƒ½å¯ä»¥ç”¨é«˜é˜¶å‡½æ•°æ¥ä»£æ›¿å®ç°ï¼š

![Kotlinæç®€æ•™ç¨‹](http://upload-images.jianshu.io/upload_images/1233356-02c37d3a6cb40264.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#### é¢å‘å‡½æ•°ç¼–ç¨‹ï¼ˆFOPï¼‰

åœ¨FPä¸­ï¼Œä¸€åˆ‡çš†æ˜¯å‡½æ•°ã€‚

å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFPï¼‰æ˜¯å…³äºä¸å˜æ€§å’Œå‡½æ•°ç»„åˆçš„ä¸€ç§ç¼–ç¨‹èŒƒå¼ã€‚

å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å®ç°é‡ç”¨çš„æ€è·¯å¾ˆä¸ä¸€æ ·ã€‚å‡½æ•°å¼è¯­è¨€æå€¡åœ¨æœ‰é™çš„å‡ ç§å…³é”®æ•°æ®ç»“æ„ï¼ˆå¦‚listã€setã€mapï¼‰ä¸Š ï¼Œ è¿ç”¨å‡½æ•°çš„ç»„åˆ ( é«˜é˜¶å‡½æ•°) æ“ä½œï¼Œè‡ªåº•å‘ä¸Šåœ°æ¥æ„å»ºä¸–ç•Œã€‚

å½“ç„¶ï¼Œæˆ‘ä»¬åœ¨å·¥ç¨‹å®è·µä¸­ï¼Œæ˜¯ä¸èƒ½æç«¯åœ°è¿½æ±‚çº¯å‡½æ•°å¼çš„ç¼–ç¨‹çš„ã€‚ä¸€ä¸ªç®€å•çš„åŸå› å°±æ˜¯ï¼šæ€§èƒ½å’Œæ•ˆç‡ã€‚ä¾‹å¦‚ï¼šå¯¹äºæœ‰çŠ¶æ€çš„æ“ä½œï¼Œå‘½ä»¤å¼æ“ä½œé€šå¸¸ä¼šæ¯”å£°æ˜å¼æ“ä½œæ›´æœ‰æ•ˆç‡ã€‚çº¯å‡½æ•°å¼ç¼–ç¨‹æ˜¯è§£å†³æŸäº›é—®é¢˜çš„ä¼Ÿå¤§å·¥å…·ï¼Œä½†æ˜¯åœ¨å¦å¤–çš„ä¸€äº›é—®é¢˜åœºæ™¯ä¸­ï¼Œå¹¶ä¸é€‚ç”¨ã€‚å› ä¸ºå‰¯ä½œç”¨æ€»æ˜¯çœŸå®å­˜åœ¨ã€‚

OOPå–œæ¬¢è‡ªé¡¶å‘ä¸‹æ¶æ„å±‚å±‚åˆ†è§£ï¼ˆè§£æ„ï¼‰ï¼ŒFPå–œæ¬¢è‡ªåº•å‘ä¸Šå±‚å±‚ç»„åˆï¼ˆå¤åˆï¼‰ã€‚ è€Œå®é™…ä¸Šï¼Œç¼–ç¨‹çš„æœ¬è´¨å°±æ˜¯æ¬¡åŒ–åˆ†è§£ä¸å¤åˆçš„è¿‡ç¨‹ã€‚é€šè¿‡è¿™æ ·çš„è¿‡ç¨‹ï¼Œåˆ›é€ ä¸€ä¸ªç¾å¦™çš„é€»è¾‘ä¹‹å¡”ä¸–ç•Œã€‚

æˆ‘ä»¬ç»å¸¸è¯´ä¸€äº›ä»£ç ç‰‡æ®µæ˜¯ä¼˜é›…çš„æˆ–ç¾è§‚çš„ï¼Œå®é™…ä¸Šæ„å‘³ç€å®ƒä»¬æ›´å®¹æ˜“è¢«äººç±»æœ‰é™çš„æ€ç»´æ‰€å¤„ç†ã€‚

å¯¹äºç¨‹åºçš„å¤åˆè€Œè¨€ï¼Œå¥½çš„ä»£ç æ˜¯å®ƒçš„è¡¨é¢ç§¯è¦æ¯”ä½“ç§¯å¢é•¿çš„æ…¢ã€‚
ä»£ç å—çš„â€œè¡¨é¢ç§¯â€æ˜¯æ˜¯æˆ‘ä»¬å¤åˆä»£ç å—æ—¶æ‰€éœ€è¦çš„ä¿¡æ¯ï¼ˆæ¥å£APIåè®®å®šä¹‰ï¼‰ã€‚ä»£ç å—çš„â€œä½“ç§¯â€å°±æ˜¯æ¥å£å†…éƒ¨çš„å®ç°é€»è¾‘ï¼ˆAPIå†…éƒ¨çš„å®ç°ä»£ç ï¼‰ã€‚

åœ¨OOPä¸­ï¼Œä¸€ä¸ªç†æƒ³çš„å¯¹è±¡åº”è¯¥æ˜¯åªæš´éœ²å®ƒçš„æŠ½è±¡æ¥å£ï¼ˆçº¯è¡¨é¢ï¼Œ æ— ä½“ç§¯ï¼‰ï¼Œå…¶æ–¹æ³•åˆ™æ‰®æ¼”ç®­å¤´çš„è§’è‰²ã€‚å¦‚æœä¸ºäº†ç†è§£ä¸€ä¸ªå¯¹è±¡å¦‚ä½•ä¸å…¶ä»–å¯¹è±¡è¿›è¡Œå¤åˆï¼Œå½“ä½ å‘ç°ä¸å¾—ä¸æ·±å…¥æŒ–æ˜å¯¹è±¡çš„å®ç°ä¹‹æ—¶ï¼Œæ­¤æ—¶ä½ æ‰€ç”¨çš„ç¼–ç¨‹èŒƒå¼çš„åŸæœ¬ä¼˜åŠ¿å°±è¡ç„¶æ— å­˜äº†ã€‚

FPé€šè¿‡å‡½æ•°ç»„åˆæ¥æ„é€ å…¶é€»è¾‘ç³»ç»Ÿã€‚FPå€¾å‘äºæŠŠè½¯ä»¶åˆ†è§£ä¸ºå…¶éœ€è¦æ‰§è¡Œçš„è¡Œä¸ºæˆ–æ“ä½œ,è€Œä¸”é€šå¸¸é‡‡ç”¨è‡ªåº•å‘ä¸Šçš„æ–¹æ³•ã€‚å‡½æ•°å¼ç¼–ç¨‹ä¹Ÿæä¾›äº†éå¸¸å¼ºå¤§çš„å¯¹äº‹ç‰©è¿›è¡ŒæŠ½è±¡å’Œç»„åˆçš„èƒ½åŠ›ã€‚

åœ¨FPé‡Œé¢ï¼Œå‡½æ•°æ˜¯â€œä¸€ç±»å…¬æ°‘â€ï¼ˆfirst-classï¼‰ã€‚å®ƒä»¬å¯ä»¥åƒ1, 2, "hello"ï¼Œtrueï¼Œå¯¹è±¡â€¦â€¦ ä¹‹ç±»çš„â€œå€¼â€ä¸€æ ·ï¼Œåœ¨ä»»æ„ä½ç½®è¯ç”Ÿï¼Œé€šè¿‡å˜é‡ï¼Œå‚æ•°å’Œæ•°æ®ç»“æ„ä¼ é€’åˆ°å…¶å®ƒåœ°æ–¹ï¼Œå¯ä»¥åœ¨ä»»ä½•ä½ç½®è¢«è°ƒç”¨ã€‚

è€Œåœ¨OOPä¸­ï¼Œå¾ˆå¤šæ‰€è°“é¢å‘å¯¹è±¡è®¾è®¡æ¨¡å¼ï¼ˆdesign patternï¼‰ï¼Œéƒ½æ˜¯å› ä¸ºé¢å‘å¯¹è±¡è¯­è¨€æ²¡æœ‰first-class functionï¼ˆå¯¹åº”çš„æ˜¯å¤šæ€æ€§ï¼‰ï¼Œæ‰€ä»¥å¯¼è‡´äº†æ¯ä¸ªå‡½æ•°å¿…é¡»è¢«åŒ…åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ï¼ˆå—çº¦æŸçš„å‡½æ•°æŒ‡é’ˆï¼‰æ‰èƒ½ä¼ é€’åˆ°å…¶å®ƒåœ°æ–¹ã€‚

#### åŒ€ç§°çš„æ•°æ®ç»“æ„ + åŒ€ç§°çš„ç®—æ³•

åœ¨é¢å‘å¯¹è±¡å¼çš„ç¼–ç¨‹ä¸­ï¼Œä¸€åˆ‡çš†æ˜¯å¯¹è±¡ï¼ˆåé‡æ•°æ®ç»“æ„ã€æ•°æ®æŠ½è±¡ï¼Œè½»ç®—æ³•ï¼‰ã€‚æˆ‘ä»¬æŠŠå®ƒå«åšï¼šèƒ–æ•°æ®ç»“æ„-ç˜¦ç®—æ³•ï¼ˆFDS-TAï¼‰ã€‚

åœ¨é¢å‘å‡½æ•°å¼çš„ç¼–ç¨‹ä¸­ï¼Œä¸€åˆ‡çš†æ˜¯å‡½æ•°ï¼ˆåé‡ç®—æ³•ï¼Œè½»æ•°æ®ç»“æ„ï¼‰ã€‚æˆ‘ä»¬æŠŠå®ƒå«åšï¼šç˜¦æ•°æ®ç»“æ„-èƒ–ç®—æ³•ï¼ˆTDS-FAï¼‰ã€‚

å¯æ˜¯ï¼Œè¿™ä¸ªä¸–ç•Œå¾ˆå¤æ‚ï¼Œä½ æ€ä¹ˆèƒ½è¯´ä¸€åˆ‡çš†æ˜¯å•¥å‘¢ï¼ŸçœŸå®çš„ç¼–ç¨‹ä¸–ç•Œï¼Œè‡ªç„¶æ˜¯åŒ€ç§°çš„æ•°æ®ç»“æ„ç»“åˆåŒ€ç§°çš„ç®—æ³•ï¼ˆSDS-SAï¼‰æ¥åˆ›é€ çš„ã€‚

æˆ‘ä»¬åœ¨ç¼–ç¨‹ä¸­ï¼Œä¸å¯èƒ½ä½¿ç”¨çº¯çš„å¯¹è±¡ï¼ˆå¯¹è±¡çš„è¡Œä¸ºæ–¹æ³•å…¶å®å°±æ˜¯å‡½æ•°ï¼‰ï¼Œæˆ–è€…çº¯çš„å‡½æ•°ï¼ˆè°ƒç”¨å‡½æ•°çš„å¯¹è±¡ã€å‡½æ•°æ“ä½œçš„æ•°æ®å…¶å®å°±æ˜¯æ•°æ®ç»“æ„ï¼‰æ¥åˆ›é€ ä¸€ä¸ªå®Œæ•´çš„ä¸–ç•Œã€‚å¦‚æœ`æ•°æ®ç»“æ„`æ˜¯`é˜´`ï¼Œ`ç®—æ³•`æ˜¯`é˜³`ï¼Œé‚£ä¹ˆåœ¨è§£å†³å®é™…é—®é¢˜ä¸­ï¼Œå¾€å¾€æ˜¯é˜´é˜³äº¤åˆè€Œæˆä¸–ç•Œã€‚è¿˜æ˜¯é‚£å¥ç»å…¸çš„ï¼š

> ç¨‹åº = åŒ€ç§°çš„æ•°æ®ç»“æ„ + åŒ€ç§°çš„ç®—æ³•

æˆ‘ä»¬ç”¨ä¸€å¹…å›¾æ¥ç®€å•è¯´æ˜ï¼š

![OOP vs FP (2).png](http://upload-images.jianshu.io/upload_images/1233356-d304c2665b511dfc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#### å‡½æ•°ä¸æ˜ å°„

ä¸€åˆ‡çš†æ˜¯æ˜ å°„ã€‚å‡½æ•°å¼ç¼–ç¨‹çš„ä»£ç ä¸»è¦å°±æ˜¯â€œå¯¹æ˜ å°„çš„æè¿°â€ã€‚æˆ‘ä»¬è¯´ç»„åˆæ˜¯ç¼–ç¨‹çš„æœ¬è´¨ï¼Œå…¶å®ï¼Œç»„åˆå°±æ˜¯å»ºç«‹æ˜ å°„å…³ç³»ã€‚

ä¸€ä¸ªå‡½æ•°æ— éå°±æ˜¯ä»è¾“å…¥åˆ°è¾“å‡ºçš„æ˜ å°„ï¼Œå†™æˆæ•°å­¦è¡¨è¾¾å¼å°±æ˜¯ï¼š

f: X -> Y
p:Y -> Z
p(f) : X ->Z

ç”¨ç¼–ç¨‹è¯­è¨€è¡¨è¾¾å°±æ˜¯ï¼š
```kotlin
fun f(x:X) : Y{}
fun p(y:Y) : Z{}
fun fp(f: (X)->Y, p: (Y)->Z) : Z {
    return {x -> p(f(x))}
}
```

### 8.1.2 å‡½æ•°å¼ç¼–ç¨‹åŸºæœ¬ç‰¹æ€§ 

åœ¨ç»å¸¸è¢«å¼•ç”¨çš„è®ºæ–‡ â€œWhy Functional Programming Mattersâ€ ä¸­ï¼Œä½œè€… John Hughes è¯´æ˜äº†æ¨¡å—åŒ–æ˜¯æˆåŠŸç¼–ç¨‹çš„å…³é”®ï¼Œè€Œå‡½æ•°ç¼–ç¨‹å¯ä»¥æå¤§åœ°æ”¹è¿›æ¨¡å—åŒ–ã€‚

åœ¨å‡½æ•°ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå†…ç½®çš„æ¡†æ¶æ¥å¼€å‘æ›´å°çš„ã€æ›´ç®€å•çš„å’Œæ›´ä¸€èˆ¬åŒ–çš„æ¨¡å—ï¼Œ ç„¶åå°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ã€‚

å‡½æ•°ç¼–ç¨‹çš„ä¸€äº›åŸºæœ¬ç‰¹ç‚¹åŒ…æ‹¬ï¼š

- å‡½æ•°æ˜¯"ç¬¬ä¸€ç­‰å…¬æ°‘"ã€‚
- é—­åŒ…ï¼ˆClosureï¼‰å’Œé«˜é˜¶å‡½æ•°ï¼ˆHigher Order Functionï¼‰ã€‚
- Lambdaæ¼”ç®—ä¸å‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰ã€‚
- æ‡’æƒ°è®¡ç®—ï¼ˆlazy evaluationï¼‰ã€‚
- ä½¿ç”¨é€’å½’ä½œä¸ºæ§åˆ¶æµç¨‹çš„æœºåˆ¶ã€‚
- å¼•ç”¨é€æ˜æ€§ã€‚
- æ²¡æœ‰å‰¯ä½œç”¨ã€‚

### 8.1.3 ç»„åˆä¸èŒƒç•´

å‡½æ•°å¼ç¼–ç¨‹çš„æœ¬è´¨æ˜¯å‡½æ•°çš„ç»„åˆï¼Œç»„åˆçš„æœ¬è´¨æ˜¯èŒƒç•´ï¼ˆCategoryï¼‰ã€‚

å’Œæç¼–ç¨‹çš„ä¸€æ ·ï¼Œæ•°å­¦å®¶å–œæ¬¢å°†é—®é¢˜ä¸æ–­åŠ ä»¥æŠ½è±¡ä»è€Œå°†æœ¬è´¨é—®é¢˜æŠ½å–å‡ºæ¥åŠ ä»¥è®ºè¯è§£å†³ï¼ŒèŒƒç•´è®ºå°±æ˜¯è¿™æ ·ä¸€é—¨ä»¥æŠ½è±¡çš„æ–¹æ³•æ¥å¤„ç†æ•°å­¦æ¦‚å¿µçš„å­¦ç§‘ï¼Œä¸»è¦ç”¨äºç ”ç©¶ä¸€äº›æ•°å­¦ç»“æ„ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼ˆå‡½æ•°ï¼‰ã€‚

åœ¨èŒƒç•´è®ºé‡Œï¼Œä¸€ä¸ªèŒƒç•´(category)ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š

- å¯¹è±¡(object).
- æ€å°„(morphism).
- ç»„åˆ(composition)æ“ä½œç¬¦ï¼Œ

#### èŒƒç•´çš„å¯¹è±¡

è¿™é‡Œçš„å¯¹è±¡å¯ä»¥çœ‹æˆæ˜¯ä¸€ç±»ä¸œè¥¿ï¼Œä¾‹å¦‚æ•°å­¦ä¸Šçš„ç¾¤ï¼Œç¯ï¼Œä»¥åŠæœ‰ç†æ•°ï¼Œæ— ç†æ•°ç­‰éƒ½å¯ä»¥å½’ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚å¯¹åº”åˆ°ç¼–ç¨‹è¯­è¨€é‡Œï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç±»å‹ï¼Œæ¯”å¦‚è¯´æ•´å‹ï¼Œå¸ƒå°”å‹ç­‰ã€‚

#### æ€å°„

æ€å°„æŒ‡çš„æ˜¯ä¸€ç§æ˜ å°„å…³ç³»ï¼Œç®€å•ç†è§£ï¼Œæ€å°„çš„ä½œç”¨å°±æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡ A é‡Œçš„å€¼ a æ˜ å°„ä¸º å¦ä¸€ä¸ªå¯¹è±¡ B é‡Œçš„å€¼ b  = f(a)ï¼Œè¿™å°±æ˜¯æ˜ å°„çš„æ¦‚å¿µã€‚

æ€å°„çš„å­˜åœ¨åæ˜ äº†å¯¹è±¡å†…éƒ¨çš„ç»“æ„ï¼Œè¿™æ˜¯èŒƒç•´è®ºç”¨æ¥ç ”ç©¶å¯¹è±¡çš„ä¸»è¦æ‰‹æ³•ï¼šå¯¹è±¡å†…éƒ¨çš„ç»“æ„ç‰¹æ€§æ˜¯é€šè¿‡ä¸åˆ«çš„å¯¹è±¡çš„æ˜ å°„å…³ç³»åæ˜ å‡ºæ¥çš„ï¼ŒåŠ¨é™æ˜¯ç›¸å¯¹çš„ï¼ŒèŒƒç•´è®ºé€šè¿‡ç ”ç©¶æ˜ å°„å…³ç³»æ¥è¾¾åˆ°æ¢çŸ¥å¯¹è±¡çš„å†…éƒ¨ç»“æ„çš„ç›®çš„ã€‚

#### ç»„åˆæ“ä½œç¬¦

ç»„åˆæ“ä½œç¬¦ï¼Œç”¨ç‚¹(.)è¡¨ç¤ºï¼Œç”¨äºå°†æ€å°„è¿›è¡Œç»„åˆã€‚ç»„åˆæ“ä½œç¬¦çš„ä½œç”¨æ˜¯å°†ä¸¤ä¸ªæ€å°„è¿›è¡Œç»„åˆï¼Œä¾‹å¦‚ï¼Œå‡è®¾å­˜åœ¨æ€å°„ f: A -> B, g: B -> Cï¼Œ åˆ™ g.f : A -> C.

ä¸€ä¸ªç»“æ„è¦æƒ³æˆä¸ºä¸€ä¸ªèŒƒç•´, é™¤äº†å¿…é¡»åŒ…å«ä¸Šè¿°ä¸‰æ ·ä¸œè¥¿ï¼Œå®ƒè¿˜è¦æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªé™åˆ¶:

- ç»“åˆå¾‹ï¼š f.(g.h) = (f.g).h ã€‚

- å°é—­å¾‹ï¼šå¦‚æœå­˜åœ¨æ€å°„ f, gï¼Œåˆ™å¿…ç„¶å­˜åœ¨ h = f.g ã€‚

- åŒä¸€å¾‹ï¼šå¯¹ç»“æ„ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡ A,  å¿…é¡»å­˜åœ¨ä¸€ä¸ªå•ä½æ€å°„ Ia: A -> Aï¼Œ å¯¹äºå•ä½æ€å°„ï¼Œæ˜¾ç„¶ï¼Œå¯¹ä»»æ„å…¶å®ƒæ€å°„ f,  æœ‰ f.I = fã€‚

åœ¨èŒƒç•´è®ºé‡Œå¦å¤–ç ”ç©¶çš„é‡ç‚¹æ˜¯èŒƒç•´ä¸èŒƒç•´ä¹‹é—´çš„å…³ç³»ï¼Œå°±æ­£å¦‚å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´æœ‰æ€å°„ä¸€æ ·ï¼ŒèŒƒç•´ä¸èŒƒç•´ä¹‹é—´ä¹Ÿå­˜åœ¨æ˜ å°„å…³ç³»ï¼Œä»è€Œå¯ä»¥å°†ä¸€ä¸ªèŒƒç•´æ˜ å°„ä¸ºå¦ä¸€ä¸ªèŒƒç•´ï¼Œè¿™ç§æ˜ å°„åœ¨èŒƒç•´è®ºä¸­å«ä½œå‡½å­(functorï¼‰ï¼Œå…·ä½“æ¥è¯´ï¼Œå¯¹äºç»™å®šçš„ä¸¤ä¸ªèŒƒç•´ A å’Œ B, å‡½å­çš„ä½œç”¨æœ‰ä¸¤ä¸ª:

- å°†èŒƒç•´ A ä¸­çš„å¯¹è±¡æ˜ å°„åˆ°èŒƒç•´ B ä¸­çš„å¯¹è±¡ã€‚
- å°†èŒƒç•´ A ä¸­çš„æ€å°„æ˜ å°„åˆ°èŒƒç•´ B ä¸­çš„æ€å°„ã€‚

æ˜¾ç„¶ï¼Œå‡½å­åæ˜ äº†ä¸åŒçš„èŒƒç•´ä¹‹é—´çš„å†…åœ¨è”ç³»ã€‚è·Ÿå‡½æ•°å’Œæ³›å‡½æ•°çš„æ€æƒ³æ˜¯ç›¸åŒçš„ã€‚

è€Œæˆ‘ä»¬çš„å‡½æ•°å¼ç¼–ç¨‹æ¢ç©¶çš„é—®é¢˜ä¸æ€æƒ³ç†å¿µå¯ä»¥è¯´æ˜¯è·ŸèŒƒç•´è®ºå®Œå…¨å»åˆã€‚å¦‚æœæŠŠå‡½æ•°å¼ç¼–ç¨‹çš„æ•´ä¸ªçš„ä¸–ç•Œçœ‹åšä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆFPçœŸæ­£æçš„äº‹æƒ…å°±æ˜¯å»ºç«‹é€šè¿‡å‡½æ•°ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œæ¥æ„å»ºè¿™æ ·ä¸€ä¸ªç¾ä¸½çš„ç¼–ç¨‹ä¸–ç•Œã€‚

å¾ˆå¤šé—®é¢˜çš„è§£å†³ï¼ˆè¯æ˜ï¼‰å…¶å®éƒ½ä¸æ¶‰åŠå…·ä½“çš„ï¼ˆæ•°æ®ï¼‰ç»“æ„ï¼Œè€Œå®Œå…¨å¯ä»¥åªä¾èµ–æ˜ å°„ä¹‹é—´çš„ç»„åˆè¿ç®—(composition)æ¥æå®šã€‚è¿™å°±æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³ã€‚

å¦‚æœæˆ‘ä»¬æŠŠ`ç¨‹åº`çœ‹åšå›¾è®ºé‡Œé¢çš„ä¸€å¼ å›¾Gï¼Œ`æ•°æ®ç»“æ„`å½“ä½œæ˜¯å›¾Gçš„èŠ‚ç‚¹Nodeï¼ˆæ•°æ®ç»“æ„ï¼Œå­˜å‚¨çŠ¶æ€ï¼‰ï¼Œ è€Œ`ç®—æ³•`é€»è¾‘å°±æ˜¯è¿™äº›èŠ‚ç‚¹Nodeä¹‹é—´çš„Edge (æ•°æ®æ˜ å°„ï¼ŒMapping)ï¼Œ é‚£ä¹ˆè¿™æ•´å¹…å›¾ `G(N,E) ` å°±æ˜¯ä¸€å¹…ç¾å¦™çš„æŠ½è±¡é€»è¾‘ä¹‹å¡”çš„ `æ˜ å°„å›¾` ï¼Œ ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç¼–ç¨‹åˆ›é€ çš„ä¸–ç•Œï¼š

![Kotlinæç®€æ•™ç¨‹](http://upload-images.jianshu.io/upload_images/1233356-230323b88fce27cf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#### å‡½æ•°æ˜¯"ç¬¬ä¸€ç­‰å…¬æ°‘"

å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFPï¼‰ä¸­ï¼Œå‡½æ•°æ˜¯"ç¬¬ä¸€ç­‰å…¬æ°‘"ã€‚

æ‰€è°“"ç¬¬ä¸€ç­‰å…¬æ°‘"ï¼ˆfirst classï¼‰ï¼Œæœ‰æ—¶ç§°ä¸º é—­åŒ…æˆ–è€… ä»¿å‡½æ•°ï¼ˆfunctorï¼‰å¯¹è±¡ï¼Œ
 æŒ‡çš„æ˜¯å‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ï¼Œå¯ä»¥èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…ä½œä¸ºåˆ«çš„å‡½æ•°çš„è¿”å›å€¼ã€‚è¿™ä¸ªä»¥å‡½æ•°ä¸ºå‚æ•°çš„æ¦‚å¿µï¼Œè·ŸCè¯­è¨€ä¸­çš„å‡½æ•°æŒ‡é’ˆç±»ä¼¼ã€‚

ä¸¾ä¾‹æ¥è¯´ï¼Œä¸‹é¢ä»£ç ä¸­çš„printå˜é‡å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆæ²¡æœ‰å‡½æ•°åï¼‰ï¼Œå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°:

```kotlin
>>> val print = fun(x:Any){println(x)}
>>> listOf(1,2,3).forEach(print)
1
2
3
```

#### é«˜é˜¶å‡½æ•°ï¼ˆHigher order Functionï¼‰

FP è¯­è¨€æ”¯æŒé«˜é˜¶å‡½æ•°ï¼Œé«˜é˜¶å‡½æ•°å°±æ˜¯å¤šé˜¶æ˜ å°„ã€‚é«˜é˜¶å‡½æ•°ç”¨å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå…¶è¾“å…¥å‚æ•°ï¼Œä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ä½œä¸ºè¾“å‡ºã€‚

ä»£ç ç¤ºä¾‹ï¼š

```kotlin
fun isOdd(x: Int) = x % 2 != 0
fun length(s: String) = s.length

fun <A, B, C> compose(f: (B) -> C, g: (A) -> B): (A) -> C {
    return { x -> f(g(x)) }
}
```

æµ‹è¯•ä»£ç ï¼š

```kotlin
fun main(args: Array<String>) {
    val oddLength = compose(::isOdd, ::length)
    val strings = listOf("a", "ab", "abc")
    println(strings.filter(oddLength)) // [a, abc]
}
```

è¿™ä¸ªcomposeå‡½æ•°ï¼Œå…¶å®å°±æ˜¯æ•°å­¦ä¸­çš„å¤åˆå‡½æ•°çš„æ¦‚å¿µï¼Œè¿™æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°çš„ä¾‹å­ï¼šä¼ å…¥çš„ä¸¤ä¸ªå‚æ•°f , géƒ½æ˜¯å‡½æ•°ï¼Œå…¶è¿”å›å€¼ä¹Ÿæ˜¯å‡½æ•°ã€‚

å›¾ç¤ºå¦‚ä¸‹ï¼š

![Kotlinæç®€æ•™ç¨‹](http://upload-images.jianshu.io/upload_images/1233356-6bd8659e597b74b9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

è¿™é‡Œçš„

```
fun <A, B, C> compose(f: (B) -> C, g: (A) -> B): (A) -> C 
```
ä¸­ç±»å‹å‚æ•°å¯¹åº”ï¼š

```
fun <String, Int, Boolean> compose(f: (Int) -> Boolean, g: (String) -> Int): (String) -> Boolean
```
è¿™é‡Œçš„`(Int) -> Boolean` ã€` (String) -> Int `ã€ `(String) -> Boolean` éƒ½æ˜¯å‡½æ•°ç±»å‹ã€‚

å…¶å®ï¼Œä»æ˜ å°„çš„è§’åº¦çœ‹ï¼Œå°±æ˜¯äºŒé˜¶æ˜ å°„ã€‚å¯¹[a, ab, abc] ä¸­æ¯ä¸ªå…ƒç´  x å…ˆæ˜ å°„æˆé•¿åº¦g(x) = 1, 2, 3 ï¼Œ å†è¿›è¡Œç¬¬äºŒæ¬¡æ˜ å°„ï¼šf(g(x)) %2 != 0 , é•¿åº¦æ˜¯å¥‡æ•°ï¼Ÿè¿”å›å€¼æ˜¯trueçš„è¢«è¿‡æ»¤å‡ºæ¥ã€‚

æœ‰äº†é«˜é˜¶å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¼˜é›…çš„æ–¹å¼è¿›è¡Œæ¨¡å—åŒ–ç¼–ç¨‹ã€‚

å¦å¤–ï¼Œé«˜é˜¶å‡½æ•°æ»¡è¶³ç»“åˆå¾‹ï¼š

![Kotlinæç®€æ•™ç¨‹](http://upload-images.jianshu.io/upload_images/1233356-4f1f3b24aaa4ac5c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#### Î»æ¼”ç®— ï¼ˆLambda calculus æˆ–è€… Î»-calculusï¼‰

ğœ† æ¼”ç®—æ˜¯å‡½æ•°å¼è¯­è¨€çš„åŸºç¡€ã€‚åœ¨Î»-æ¼”ç®—çš„åŸºç¡€ä¸Šï¼Œå‘å±•èµ·æ¥çš„Ï€-æ¼”ç®—ã€Ï‡-æ¼”ç®—ï¼Œæˆä¸ºè¿‘å¹´æ¥çš„å¹¶å‘ç¨‹åºçš„ç†è®ºå·¥å…·ä¹‹ä¸€ï¼Œè®¸å¤šç»å…¸çš„å¹¶å‘ç¨‹åºæ¨¡å‹å°±æ˜¯ä»¥Ï€-æ¼”ç®—ä¸ºæ¡†æ¶çš„ã€‚Î» æ¼”ç®—ç¥å¥‡ä¹‹å¤„åœ¨äºï¼Œé€šè¿‡æœ€åŸºæœ¬çš„å‡½æ•°æŠ½è±¡å’Œå‡½æ•°åº”ç”¨æ³•åˆ™ï¼Œé…å¥—ä»¥é€‚å½“çš„æŠ€å·§ï¼Œä¾¿èƒ½å¤Ÿæ„é€ å‡ºä»»æ„å¤æ‚çš„å¯è®¡ç®—å‡½æ•°ã€‚

Î»æ¼”ç®—æ˜¯ä¸€å¥—ç”¨äºç ”ç©¶å‡½æ•°å®šä¹‰ã€å‡½æ•°åº”ç”¨å’Œé€’å½’çš„å½¢å¼ç³»ç»Ÿã€‚å®ƒç”±  é˜¿éš†ä½Â·ä¸˜å¥‡ï¼ˆAlonzo Churchï¼Œ1903~1995ï¼‰å’Œ Stephen Cole Kleene åœ¨ 20 ä¸–çºªä¸‰åå¹´ä»£å¼•å…¥ã€‚å½“æ—¶çš„èƒŒæ™¯æ˜¯è§£å†³å‡½æ•°å¯è®¡ç®—çš„æœ¬è´¨æ€§é—®é¢˜ï¼ŒåˆæœŸÎ»æ¼”ç®—æˆåŠŸçš„è§£å†³äº†åœ¨å¯è®¡ç®—ç†è®ºä¸­çš„åˆ¤å®šæ€§é—®é¢˜ï¼Œåæ¥æ ¹æ®Churchâ€“Turing thesisï¼Œè¯æ˜äº†Î»æ¼”ç®—ä¸å›¾çµæœºæ˜¯ç­‰ä»·çš„ã€‚

Î» æ¼”ç®—å¯ä»¥è¢«ç§°ä¸ºæœ€å°çš„é€šç”¨ç¨‹åºè®¾è®¡è¯­è¨€ã€‚å®ƒåŒ…æ‹¬ä¸€æ¡å˜æ¢è§„åˆ™ (å˜é‡æ›¿æ¢) å’Œä¸€æ¡å‡½æ•°å®šä¹‰æ–¹å¼ï¼ŒÎ»æ¼”ç®—ä¹‹é€šç”¨åœ¨äºï¼Œä»»ä½•ä¸€ä¸ªå¯è®¡ç®—å‡½æ•°éƒ½èƒ½ç”¨è¿™ç§å½¢å¼æ¥è¡¨è¾¾å’Œæ±‚å€¼ã€‚

Î»æ¼”ç®—å¼ºè°ƒçš„æ˜¯å˜æ¢è§„åˆ™çš„è¿ç”¨ï¼Œè¿™é‡Œçš„å˜æ¢è§„åˆ™æœ¬è´¨ä¸Šå°±æ˜¯å‡½æ•°æ˜ å°„ã€‚
Lambda è¡¨è¾¾å¼ï¼ˆLambda Expressionï¼‰ æ˜¯ Î»æ¼”ç®— çš„ä¸€éƒ¨åˆ†ã€‚

Î»æ¼”ç®—ä¸­ä¸€åˆ‡çš†å‡½æ•°ï¼Œå…¨ä½“Î»è¡¨è¾¾å¼æ„æˆÎ›ç©ºé—´ï¼ŒÎ»è¡¨è¾¾å¼ä¸ºÎ›ç©ºé—´åˆ°Î›ç©ºé—´çš„å‡½æ•°ã€‚

ä¾‹å¦‚ï¼Œåœ¨ lambda æ¼”ç®—ä¸­æœ‰è®¸å¤šæ–¹å¼éƒ½å¯ä»¥å®šä¹‰è‡ªç„¶æ•°ï¼Œæœ€å¸¸è§çš„æ˜¯Church æ•´æ•°ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š

```
0 = Î» f. Î» x. x
1 = Î» f. Î» x. f x
2 = Î» f. Î» x. f (f x)
3 = Î» f. Î» x. f (f (f x))
...
```

æ•°å­¦å®¶ä»¬éƒ½å´‡å°šç®€æ´ï¼Œåªç”¨ä¸€ä¸ªå…³é”®å­— 'Î»' æ¥è¡¨ç¤ºå¯¹å‡½æ•°çš„æŠ½è±¡ã€‚

å…¶ä¸­çš„`Î» f. Î» x.`ï¼Œ`Î» f` æ˜¯æŠ½è±¡å‡ºæ¥çš„å‡½æ•°,  `Î» x`æ˜¯è¾“å…¥å‚æ•°ï¼Œ  `.` è¯­æ³•ç”¨æ¥åˆ†å‰²å‚æ•°è¡¨å’Œå‡½æ•°ä½“ã€‚  ä¸ºäº†æ›´ç®€æ´ï¼Œæˆ‘ä»¬ç®€è®°ä¸ºF, é‚£ä¹ˆä¸Šé¢çš„Church æ•´æ•°å®šä¹‰ç®€å†™ä¸ºï¼š

```
0 = F x
1 = F f x
2 = F f (f x)
3 = F f (f (f x))
...

```

ä½¿ç”¨Î»æ¼”ç®—å®šä¹‰å¸ƒå°”å€¼ï¼š
```
TRUE = Î» x. Î» y. x
FALSE = Î» x. Î» y. y
```
ç”¨å›¾ç¤ºå¦‚ä¸‹ï¼š

![Kotlinæç®€æ•™ç¨‹](http://upload-images.jianshu.io/upload_images/1233356-09460980ff21ed42.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![Kotlinæç®€æ•™ç¨‹](http://upload-images.jianshu.io/upload_images/1233356-b0d358c8e56dc089.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

åœ¨Î»æ¼”ç®—ä¸­åªæœ‰å‡½æ•°ï¼Œä¸€é—¨ç¼–ç¨‹è¯­è¨€ä¸­çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚booleanã€numberã€listç­‰ï¼Œéƒ½å¯ä»¥ä½¿ç”¨çº¯Î»æ¼”ç®—æ¥å®ç°ã€‚æˆ‘ä»¬ä¸ç”¨å»å…³å¿ƒæ•°æ®çš„å€¼æ˜¯ä»€ä¹ˆï¼Œé‡ç‚¹æ˜¯æˆ‘ä»¬èƒ½å¯¹è¿™ä¸ªå€¼åšä»€ä¹ˆæ“ä½œï¼ˆapply functionï¼‰ã€‚

ä½¿ç”¨Î»æ¼”ç®—å®šä¹‰ä¸€ä¸ªæ’ç­‰å‡½æ•°I ï¼š

```
 I = Î» x . x
```

ä½¿ç”¨Kotlinä»£ç æ¥å†™ï¼Œå¦‚ä¸‹ï¼š

```
>>> val I = {x:Int -> x}
>>> I(0)
0
>>> I(1)
1
>>> I(100)
100
```

å¯¹ I è€Œè¨€ä»»ä½•ä¸€ä¸ª x éƒ½æ˜¯å®ƒçš„ä¸åŠ¨ç‚¹(å³å¯¹æŸä¸ªå‡½æ•° f(x) å­˜åœ¨è¿™æ ·çš„ä¸€ä¸ªè¾“å…¥ xï¼Œä½¿å¾—å‡½æ•°çš„è¾“å‡ºä»æ—§ç­‰äºè¾“å…¥çš„ x ã€‚å½¢å¼åŒ–çš„è¡¨ç¤ºå³ä¸º  f(x) = x )ã€‚

å†ä¾‹å¦‚ï¼Œä¸‹é¢çš„ Î» è¡¨è¾¾å¼è¡¨ç¤ºå°†xæ˜ å°„ä¸º x+1 :

```
 Î» x . x + 1
```
æµ‹è¯•ä»£ç ï¼š
```
( Î» x . x + 1) 5
```
å°†è¾“å‡º6 ã€‚

è¿™æ ·çš„è¡¨è¾¾å¼ï¼Œåœ¨Kotlinä¸­, å¦‚æœä½¿ç”¨Lambdaè¡¨è¾¾å¼æˆ‘ä»¬è¿™æ ·å†™ï¼š
```
>>> val addOneLambda = {
...         x: Int ->
...         x + 1
...     }
>>> addOneLambda(1)
2
```
å¦‚æœä½¿ç”¨åŒ¿åå‡½æ•°ï¼Œè¿™æ ·å†™ï¼š
```
>>> val addOneAnonymouse = (fun(x: Int): Int {
...         return x + 1
...     })
>>> addOneAnonymouse(1)
2
```

åœ¨ä¸€äº›å¤è€çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œlambdaè¡¨è¾¾å¼è¿˜æ˜¯æ¯”è¾ƒæ¥è¿‘lambdaæ¼”ç®—çš„è¡¨è¾¾å¼çš„ã€‚åœ¨ç°ä»£ç¨‹åºè¯­è¨€ä¸­çš„lambdaè¡¨è¾¾å¼ï¼Œåªæ˜¯å–åè‡ªlambdaæ¼”ç®—ï¼Œå·²ç»ä¸åŸå§‹çš„lambdaæ¼”ç®—æœ‰å¾ˆå¤§å·®åˆ«äº†ã€‚ä¾‹å¦‚ï¼š

![Kotlinæç®€æ•™ç¨‹](http://upload-images.jianshu.io/upload_images/1233356-07044fcd613e1c1e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

åœ¨Javascripté‡Œæ²¡æœ‰ä»»ä½•è¯­æ³•ä¸“é—¨ä»£è¡¨lambda,  åªå†™æˆè¿™æ ·çš„åµŒå¥—å‡½æ•°`function{ return function{...} }`ã€‚

#### å‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰

å¾ˆå¤šåŸºäº lambda calculus çš„ç¨‹åºè¯­è¨€ï¼Œæ¯”å¦‚ ML å’Œ Haskellï¼Œéƒ½ä¹ æƒ¯ç”¨currying çš„æ‰‹æ³•æ¥è¡¨ç¤ºå‡½æ•°ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ åœ¨ Haskell é‡Œé¢è¿™æ ·å†™ä¸€ä¸ªå‡½æ•°ï¼š
 ```
f x y = x + y 
 ```
ç„¶åä½ å°±å¯ä»¥è¿™æ ·æŠŠé“¾è¡¨é‡Œçš„æ¯ä¸ªå…ƒç´ åŠ ä¸Š 2ï¼š 
```
map (f 2) [1, 2, 3] 
```

å®ƒä¼šè¾“å‡º [3, 4, 5]ã€‚ 

Currying ç”¨ä¸€å…ƒå‡½æ•°ï¼Œæ¥ç»„åˆæˆå¤šå…ƒå‡½æ•°ã€‚æ¯”å¦‚ï¼Œä¸Šé¢çš„å‡½æ•° f çš„å®šä¹‰åœ¨ Scheme é‡Œé¢ç›¸å½“äºï¼š 
```
(define f (lambda (x) (lambda (y) (+ x y)))) 
```
å®ƒæ˜¯è¯´ï¼Œå‡½æ•° fï¼Œæ¥å—ä¸€ä¸ªå‚æ•° xï¼Œè¿”å›å¦ä¸€ä¸ªå‡½æ•°ï¼ˆæ²¡æœ‰åå­—ï¼‰ã€‚è¿™ä¸ªåŒ¿åå‡½æ•°ï¼Œå¦‚æœå†æ¥å—ä¸€ä¸ªå‚æ•° yï¼Œå°±ä¼šè¿”å› x + yã€‚æ‰€ä»¥ä¸Šé¢çš„ä¾‹å­é‡Œé¢ï¼Œ(f 2) è¿”å›çš„æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå®ƒä¼šæŠŠ 2 åŠ åˆ°è‡ªå·±çš„å‚æ•°ä¸Šé¢è¿”å›ã€‚æ‰€ä»¥æŠŠå®ƒ map åˆ° [1, 2, 3]ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº† [3, 4, 5]ã€‚ 

æˆ‘ä»¬å†ä½¿ç”¨Kotlinä¸­çš„å‡½æ•°å¼ç¼–ç¨‹æ¥ä¸¾ä¾‹è¯´æ˜ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹ä¸‹æ™®é€šçš„äºŒå…ƒå‡½æ•°çš„å†™æ³•ï¼š
```
fun add(x: Int, y: Int): Int {
    return x + y
}

add(1, 2) // è¾“å‡º3
```

è¿™ç§å†™æ³•æœ€ç®€å•ï¼Œåªæœ‰ä¸€å±‚æ˜ å°„ã€‚

æŸ¯é‡ŒåŒ–çš„å†™æ³•ï¼š
```
fun curryAdd(x: Int): (Int) -> Int {
    return { y -> x + y }
}

curryAdd(1)(2)// è¾“å‡º3

```

æˆ‘ä»¬å…ˆä¼ å…¥å‚æ•°x = 1ï¼Œ è¿”å›å‡½æ•° curryAdd(1) = 1 + yï¼›
ç„¶åä¼ å…¥å‚æ•° y = 2, è¿”å›æœ€ç»ˆçš„å€¼ curryAdd(1)(2) = 3ã€‚

å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ Î» è¡¨è¾¾å¼çš„å†™æ³•ï¼š

```
val lambdaCurryAdd = {
        x: Int ->
        {
            y: Int ->
            x + y
        }
    }

lambdaCurryAdd(1)(2)  // è¾“å‡º 3

```

è¿™ä¸ªåšæ³•å…¶å®æ¥æºäºæœ€æ—©çš„ lambda calculus çš„è®¾è®¡ã€‚å› ä¸º lambda calculus çš„å‡½æ•°éƒ½åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥ä¸ºäº†èƒ½å¤Ÿè¡¨ç¤ºå¤šå‚æ•°çš„å‡½æ•°ï¼Œ Haskell Curry ï¼ˆæ•°å­¦å®¶å’Œé€»è¾‘å­¦å®¶ï¼‰ï¼Œå‘æ˜äº†è¿™ä¸ªæ–¹æ³•ã€‚ 

ä¸è¿‡åœ¨ç¼–ç å®è·µä¸­ï¼ŒCurrying çš„å·¥ç¨‹å®ç”¨æ€§ã€ç®€æ´æ€§ä¸Šä¸æ˜¯é‚£ä¹ˆçš„å‹å¥½ã€‚å¤§é‡ä½¿ç”¨ Curryingï¼Œä¼šå¯¼è‡´ä»£ç å¯è¯»æ€§é™ä½ï¼Œå¤æ‚æ€§å¢åŠ ï¼Œå¹¶ä¸”è¿˜å¯èƒ½å› æ­¤å¼•èµ·æ„æƒ³ä¸åˆ°çš„é”™è¯¯ã€‚ æ‰€ä»¥åœ¨æˆ‘ä»¬çš„è®²æ±‚å·¥ç¨‹å®è·µæ€§èƒ½çš„Kotlinè¯­è¨€ä¸­ï¼Œ

å¤è€è€Œç¾ä¸½çš„ç†è®ºï¼Œä¹Ÿè®¸èƒ½å¤Ÿç»™æˆ‘å¸¦æ¥æ€æƒ³çš„å¯è¿ªï¼Œä½†æ˜¯åœ¨å·¥ç¨‹å®è·µä¸­æœªå¿…é‚£ä¹ˆç†æƒ³ã€‚

#### é—­åŒ…ï¼ˆClosureï¼‰

é—­åŒ…ç®€å•è®²å°±æ˜¯ä¸€ä¸ªä»£ç å—ï¼Œç”¨`{ }`åŒ…èµ·æ¥ã€‚æ­¤æ—¶ï¼Œç¨‹åºä»£ç ä¹Ÿå°±æˆäº†æ•°æ®ï¼Œå¯ä»¥è¢«ä¸€ä¸ªå˜é‡æ‰€å¼•ç”¨ï¼ˆä¸Cè¯­è¨€çš„å‡½æ•°æŒ‡é’ˆæ¯”è¾ƒç±»ä¼¼ï¼‰ã€‚é—­åŒ…çš„æœ€å…¸å‹çš„åº”ç”¨æ˜¯å®ç°å›è°ƒå‡½æ•°ï¼ˆcallbackï¼‰ã€‚

é—­åŒ…åŒ…å«ä»¥ä¸‹ä¸¤ä¸ªç»„æˆéƒ¨åˆ†ï¼š

- è¦æ‰§è¡Œçš„ä»£ç å—ï¼ˆç”±äºè‡ªç”±å˜é‡è¢«åŒ…å«åœ¨ä»£ç å—ä¸­ï¼Œè¿™äº›è‡ªç”±å˜é‡ä»¥åŠå®ƒä»¬å¼•ç”¨çš„å¯¹è±¡æ²¡æœ‰è¢«é‡Šæ”¾ï¼‰
- è‡ªç”±å˜é‡çš„ä½œç”¨åŸŸ

åœ¨PHPã€Scalaã€Schemeã€Common Lispã€Smalltalkã€Groovyã€JavaScriptã€Rubyã€ Pythonã€Goã€Luaã€objective cã€swift ä»¥åŠJavaï¼ˆJava8åŠä»¥ä¸Šï¼‰ç­‰è¯­è¨€ä¸­éƒ½èƒ½æ‰¾åˆ°å¯¹é—­åŒ…ä¸åŒç¨‹åº¦çš„æ”¯æŒã€‚

Lambdaè¡¨è¾¾å¼å¯ä»¥è¡¨ç¤ºé—­åŒ…ã€‚

#### æƒ°æ€§è®¡ç®—

é™¤äº†é«˜é˜¶å‡½æ•°ã€é—­åŒ…ã€Lambdaè¡¨è¾¾å¼çš„æ¦‚å¿µï¼ŒFP è¿˜å¼•å…¥äº†æƒ°æ€§è®¡ç®—çš„æ¦‚å¿µã€‚æƒ°æ€§è®¡ç®—ï¼ˆå°½å¯èƒ½å»¶è¿Ÿè¡¨è¾¾å¼æ±‚å€¼ï¼‰æ˜¯è®¸å¤šå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€çš„ç‰¹æ€§ã€‚æƒ°æ€§é›†åˆåœ¨éœ€è¦æ—¶æä¾›å…¶å…ƒç´ ï¼Œæ— éœ€é¢„å…ˆè®¡ç®—å®ƒä»¬ï¼Œè¿™å¸¦æ¥äº†ä¸€äº›å¥½å¤„ã€‚é¦–å…ˆï¼Œæ‚¨å¯ä»¥å°†è€—æ—¶çš„è®¡ç®—æ¨è¿Ÿåˆ°ç»å¯¹éœ€è¦çš„æ—¶å€™ã€‚å…¶æ¬¡ï¼Œæ‚¨å¯ä»¥åˆ›é€ æ— é™ä¸ªé›†åˆï¼Œåªè¦å®ƒä»¬ç»§ç»­æ”¶åˆ°è¯·æ±‚ï¼Œå°±ä¼šç»§ç»­æä¾›å…ƒç´ ã€‚ç¬¬ä¸‰ï¼Œmap å’Œ filter ç­‰å‡½æ•°çš„æƒ°æ€§ä½¿ç”¨è®©æ‚¨èƒ½å¤Ÿå¾—åˆ°æ›´é«˜æ•ˆçš„ä»£ç ï¼ˆè¯·å‚é˜… å‚è€ƒèµ„æ–™ ä¸­çš„é“¾æ¥ï¼ŒåŠ å…¥ç”± Brian Goetz ç»„ç»‡çš„ç›¸å…³è®¨è®ºï¼‰ã€‚

åœ¨æƒ°æ€§è®¡ç®—ä¸­ï¼Œè¡¨è¾¾å¼ä¸æ˜¯åœ¨ç»‘å®šåˆ°å˜é‡æ—¶ç«‹å³è®¡ç®—ï¼Œè€Œæ˜¯åœ¨æ±‚å€¼ç¨‹åºéœ€è¦äº§ç”Ÿè¡¨è¾¾å¼çš„å€¼æ—¶è¿›è¡Œè®¡ç®—ã€‚

ä¸€ä¸ªæƒ°æ€§è®¡ç®—çš„ä¾‹å­æ˜¯ç”Ÿæˆæ— ç©· Fibonacci åˆ—è¡¨çš„å‡½æ•°ï¼Œä½†æ˜¯å¯¹ ç¬¬ n ä¸ªFibonacci æ•°çš„è®¡ç®—ç›¸å½“äºåªæ˜¯ä»å¯èƒ½çš„æ— ç©·åˆ—è¡¨ä¸­æå–ä¸€é¡¹ã€‚

#### é€’å½’å‡½æ•°

é€’å½’æŒ‡çš„æ˜¯ä¸€ä¸ªå‡½æ•°åœ¨å…¶å®šä¹‰ä¸­ç›´æ¥æˆ–é—´æ¥è°ƒç”¨è‡ªèº«çš„ä¸€ç§æ–¹æ³•, å®ƒé€šå¸¸æŠŠä¸€ä¸ªå¤§å‹çš„å¤æ‚çš„é—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªä¸åŸé—®é¢˜ç›¸ä¼¼çš„è§„æ¨¡è¾ƒå°çš„é—®é¢˜æ¥è§£å†³ï¼ˆå¤ç”¨å‡½æ•°è‡ªèº«ï¼‰, è¿™æ ·å¯ä»¥æå¤§çš„å‡å°‘ä»£ç é‡ã€‚é€’å½’åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ:

1.é€’æ¨:æŠŠå¤æ‚çš„é—®é¢˜çš„æ±‚è§£æ¨åˆ°æ¯”åŸé—®é¢˜ç®€å•ä¸€äº›çš„é—®é¢˜çš„æ±‚è§£;
2.å›å½’:å½“è·å¾—æœ€ç®€å•çš„æƒ…å†µå,é€æ­¥è¿”å›,ä¾æ¬¡å¾—åˆ°å¤æ‚çš„è§£ã€‚

é€’å½’çš„èƒ½åŠ›åœ¨äºç”¨æœ‰é™çš„è¯­å¥æ¥å®šä¹‰å¯¹è±¡çš„æ— é™é›†åˆã€‚

ä½¿ç”¨é€’å½’è¦æ³¨æ„çš„æœ‰ä¸¤ç‚¹:

ï¼ˆ1ï¼‰é€’å½’å°±æ˜¯åœ¨è¿‡ç¨‹æˆ–å‡½æ•°é‡Œé¢è°ƒç”¨è‡ªèº«;

ï¼ˆ2ï¼‰åœ¨ä½¿ç”¨é€’å½’æ—¶,å¿…é¡»æœ‰ä¸€ä¸ªæ˜ç¡®çš„é€’å½’ç»“æŸæ¡ä»¶,ç§°ä¸ºé€’å½’å‡ºå£ã€‚

ä¸‹é¢æˆ‘ä»¬ä¸¾ä¾‹è¯´æ˜ã€‚

é˜¶ä¹˜å‡½æ•° fact(n) ä¸€èˆ¬è¿™æ ·é€’å½’åœ°å®šä¹‰ï¼š

fact(n) = if n=0 then 1 else n * fact(n-1)

æˆ‘ä»¬ä½¿ç”¨Kotlinä»£ç å®ç°è¿™ä¸ªå‡½æ•°å¦‚ä¸‹ï¼š
```
fun factorial(n: Int): Int {
    println("factorial() called!  n=$n")
    if (n == 0) return 1;
    return n * factorial(n - 1);
}
```

æµ‹è¯•ä»£ç ï¼š
```
@Test
fun testFactorial() {
    Assert.assertTrue(factorial(0) == 1)
    Assert.assertTrue(factorial(1) == 1)
    Assert.assertTrue(factorial(3) == 6)
    Assert.assertTrue(factorial(10) == 3628800)
}
```

è¾“å‡ºï¼š
```
factorial() called!  n=0
factorial() called!  n=1
factorial() called!  n=0
factorial() called!  n=3
factorial() called!  n=2
factorial() called!  n=1
factorial() called!  n=0
factorial() called!  n=10
factorial() called!  n=9
factorial() called!  n=8
factorial() called!  n=7
factorial() called!  n=6
factorial() called!  n=5
factorial() called!  n=4
factorial() called!  n=3
factorial() called!  n=2
factorial() called!  n=1
factorial() called!  n=0
BUILD SUCCESSFUL in 24s
6 actionable tasks: 5 executed, 1 up-to-date
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨factorialè®¡ç®—çš„è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°ä¸æ–­çš„è°ƒç”¨è‡ªèº«ï¼Œç„¶åä¸æ–­çš„å±•å¼€ï¼Œç›´åˆ°æœ€ååˆ°è¾¾äº†ç»ˆæ­¢çš„n==0ï¼Œè¿™æ˜¯é€’å½’çš„åŸåˆ™ä¹‹ä¸€ï¼Œå°±æ˜¯åœ¨é€’å½’çš„è¿‡ç¨‹ä¸­ï¼Œä¼ é€’çš„å‚æ•°ä¸€å®šè¦ä¸æ–­çš„æ¥è¿‘ç»ˆæ­¢æ¡ä»¶ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å°±æ˜¯nçš„å€¼ä¸æ–­å‡å°‘ï¼Œç›´è‡³æœ€åä¸º0ã€‚

å†ä¸¾ä¸ªFibonacciæ•°åˆ—çš„ä¾‹å­ã€‚

Fibonacciæ•°åˆ—ç”¨æ•°å­¦ä¸­çš„æ•°åˆ—çš„é€’å½’è¡¨è¾¾å¼å®šä¹‰å¦‚ä¸‹ï¼š

  fibonacci (0) = 0
  fibonacci (1) = 1
  fibonacci (n) = fibonacci (n - 1) + fibonacci (n - 2)

æˆ‘ä»¬ä½¿ç”¨Kotlinä»£ç å®ç°å®ƒï¼š

```
fun fibonacci(n: Int): Int {
    if (n == 1 || n == 2) return 1;
    return fibonacci(n - 1) + fibonacci(n - 2);
}
```

æµ‹è¯•ä»£ç ï¼š
```
@Test
fun testFibonacci() {
    Assert.assertTrue(fibonacci(1) == 1)
    Assert.assertTrue(fibonacci(2) == 1)
    Assert.assertTrue(fibonacci(3) == 2)
    Assert.assertTrue(fibonacci(4) == 3)
    Assert.assertTrue(fibonacci(5) == 5)
    Assert.assertTrue(fibonacci(6) == 8)
}
```

å¤–ç¯‡ï¼š Schemeä¸­çš„é€’å½’å†™æ³•

å› ä¸ºScheme ç¨‹åºä¸­å……æ»¡äº†ä¸€å¯¹å¯¹åµŒå¥—çš„å°æ‹¬å·ï¼Œè¿™äº›åµŒå¥—çš„ç¬¦å·ä½“ç°äº†æœ€åŸºæœ¬çš„æ•°å­¦æ€æƒ³â€”â€”é€’å½’ã€‚æ‰€ä»¥ï¼Œä¸ºäº†å¤šç»´åº¦çš„æ¥ç†è§£é€’å½’ï¼Œæˆ‘ä»¬ç»™å‡ºSchemeä¸­çš„é€’å½’å†™æ³•ï¼š

```

  (define factorial
    (lambda (n)
      (if (= n 0)
          1
          (* n (factorial (- n 1))))))

  (define fibonacci
    (lambda (n)
      (cond ((= n 0) 0)
            ((= n 1) 1)
            (else (+ (fibonacci (- n 1)) (fibonacci (- n 2)))))))

```

å…¶ä¸­å…³é”®å­—lambda, è¡¨æ˜æˆ‘ä»¬å®šä¹‰çš„(å³ä»»ä½•å°é—­çš„å¼€æ‹¬å·ç«‹å³ç¦»å¼€Î»åŠå…¶ç›¸åº”çš„å…³é—­æ‹¬å·)æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚

Lambdaæ¼”ç®—å’Œå‡½æ•°å¼è¯­è¨€çš„è®¡ç®—æ¨¡å‹å¤©ç”Ÿè¾ƒä¸ºæ¥è¿‘ï¼ŒLambdaè¡¨è¾¾å¼ä¸€èˆ¬æ˜¯è¿™äº›è¯­è¨€å¿…å¤‡çš„åŸºæœ¬ç‰¹æ€§ã€‚

Schemeæ˜¯Lispæ–¹è¨€ï¼Œéµå¾ªæç®€ä¸»ä¹‰å“²å­¦ï¼Œæœ‰ç€ç‹¬ç‰¹çš„é­…åŠ›ã€‚Schemeçš„ä¸€ä¸ªä¸»è¦ç‰¹æ€§æ˜¯å¯ä»¥åƒæ“ä½œæ•°æ®ä¸€æ ·æ“ä½œå‡½æ•°è°ƒç”¨ã€‚

#### Yç»„åˆå­(Y - Combinator)

åœ¨ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå‡½æ•°éƒ½æ˜¯å…·åçš„ï¼Œè€Œåœ¨ä¼ ç»Ÿçš„Lambda Calculusä¸­ï¼Œå‡½æ•°éƒ½æ˜¯æ²¡æœ‰åå­—çš„ã€‚è¿™æ ·å°±å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ â€”â€” å¦‚ä½•åœ¨Lambda Calculusä¸­å®ç°é€’å½’å‡½æ•°ï¼Œå³åŒ¿åé€’å½’å‡½æ•°ã€‚Haskell B. Curry ï¼ˆç¼–ç¨‹è¯­è¨€ Haskell å°±æ˜¯ä»¥æ­¤äººå‘½åçš„ï¼‰å‘ç°äº†ä¸€ç§ä¸åŠ¨ç‚¹ç»„åˆå­ â€”â€” Y Combinatorï¼Œç”¨äºè§£å†³åŒ¿åé€’å½’å‡½æ•°å®ç°çš„é—®é¢˜ã€‚Y ç»„åˆå­(Y Combinator)ï¼Œå…¶å®šä¹‰æ˜¯ï¼š
```
Y = Î»f.(Î»x.f (x x)) (Î»x.f (x x))
```
å¯¹äºä»»æ„å‡½æ•° gï¼Œå¯ä»¥é€šè¿‡æ¨å¯¼å¾—åˆ°` Y g = g (Y g) ` (ï¼ˆé«˜é˜¶ï¼‰å‡½æ•°çš„ä¸åŠ¨ç‚¹ )ï¼Œä»è€Œè¯æ˜ _Î»æ¼”ç®—_ æ˜¯ _å›¾çµå®Œå¤‡_ çš„ã€‚ _Y ç»„åˆå­_ çš„é‡è¦æ€§ç”±æ­¤å¯è§ä¸€æ–‘ã€‚ 

å¥¹è®©äººç»å°½è„‘æ±ï¼Œä¹Ÿç¢ç£¨ä¸å®šï¼å¥¹è®©äººå¿ƒåŠ›æ†”æ‚´ï¼Œåˆç™¾èˆ¬å›å‘³ï¼
å¥¹ï¼Œçœ‹ä¼¼å¹³æ·¡ï¼Œå´æ·±è—ç„æœºï¼å¥¹ï¼Œè²Œä¸æƒŠäººï¼Œå´å¤©ä¸‹æ— æ•Œï¼
å¥¹æ˜¯è°ï¼Ÿå¥¹å°±æ˜¯ Y ç»„åˆå­ï¼šY = Î»f.(Î»x.f (x x)) (Î»x.f (x x))ï¼Œä¸åŠ¨ç‚¹ç»„åˆå­ä¸­æœ€è‘—åçš„ä¸€ä¸ªã€‚

Y ç»„åˆå­è®©æˆ‘ä»¬å¯ä»¥å®šä¹‰åŒ¿åçš„é€’å½’å‡½æ•°ã€‚Yç»„åˆå­æ˜¯Lambdaæ¼”ç®—çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ç†è®ºåŸºç¡€ã€‚ä»…ä»…é€šè¿‡Lambdaè¡¨è¾¾å¼è¿™ä¸ªæœ€åŸºæœ¬çš„ åŸå­ å®ç°å¾ªç¯è¿­ä»£ã€‚Y ç»„åˆå­æœ¬èº«æ˜¯å‡½æ•°ï¼Œå…¶è¾“å…¥ä¹Ÿæ˜¯å‡½æ•°ï¼ˆåœ¨ Lisp ä¸­è¿ç¨‹åºéƒ½æ˜¯å‡½æ•°ï¼‰ã€‚

é¢‡æœ‰é“ç”Ÿä¸€ã€ä¸€ç”ŸäºŒã€äºŒç”Ÿä¸‰ã€ä¸‰ç”Ÿä¸‡ç‰©çš„éŸµå‘³ã€‚

ä¸¾ä¸ªä¾‹å­è¯´æ˜ï¼š æˆ‘ä»¬å…ˆä½¿ç”¨ç±»Cè¯­è¨€ä¸­è¾ƒä¸ºç†Ÿæ‚‰çš„JavaScriptæ¥å®ç°ä¸€ä¸ªYç»„åˆå­å‡½æ•°ï¼Œ å› ä¸ºJavaScriptè¯­è¨€çš„åŠ¨æ€ç‰¹æ€§ï¼Œä½¿å¾—è¯¥å®ç°ç›¸æ¯”è®¸å¤šéœ€è¦å£°æ˜å„ç§ç±»å‹çš„è¯­è¨€è¦ç®€æ´è®¸å¤šï¼š

```
function Y(f) {
    return (function (g) {
        return g(g);
    })(function (g) {
        return f(function (x) {
            return g(g)(x);
        });
    });
}

var fact = Y(function (rec) {
    return function (n) {
        return n == 0 ? 1 : n * rec(n - 1);
    };
});

```

æˆ‘ä»¬ä½¿ç”¨äº†Yå‡½æ•°ç»„åˆä¸€æ®µåŒ¿åå‡½æ•°ä»£ç ï¼Œå®ç°äº†ä¸€ä¸ªåŒ¿åçš„é€’å½’é˜¶ä¹˜å‡½æ•°ã€‚

ç›´æ¥å°†è¿™ä¸¤ä¸ªå‡½æ•°æ”¾åˆ°æµè§ˆå™¨çš„Consoleä¸­å»æ‰§è¡Œï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š
```
fact(10)
3628800
```

![Kotlinæç®€æ•™ç¨‹](http://upload-images.jianshu.io/upload_images/1233356-88255d35335bb5b7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

è¿™ä¸ªYå‡½æ•°ç›¸å½“ç»•è„‘ã€‚è¦æ˜¯åœ¨Clojureï¼ˆJVMä¸Šçš„Lispæ–¹è¨€ï¼‰ä¸­ï¼Œè¿™ä¸ªYå‡½æ•°å®ç°å¦‚ä¸‹ï¼š

```
(defn Y [r]
 ((fn [f] (f f))
 (fn [f]
 (r (fn [x] ((f f) x))))))
```

ä½¿ç”¨Schemeè¯­è¨€æ¥è¡¨è¾¾ï¼š

```
  (define Y 
    (lambda (f)
      ((lambda (x) (f (lambda (y) ((x x) y))))
       (lambda (x) (f (lambda (y) ((x x) y)))))))
```

æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨Schemeè¯­è¨€è¡¨è¾¾çš„Yç»„åˆå­è·Ÿ åŸç”Ÿçš„ Î»æ¼”ç®— è¡¨è¾¾å¼åŸºæœ¬ä¸€æ ·ã€‚

ç”¨CoffeeScriptå®ç°ä¸€ä¸ª Y combinatorå°±é•¿è¿™æ ·ï¼š
```
coffee> Y = (f) -> ((x) -> (x x)) ((x) -> (f ((y) -> ((x x) y))))
[Function]
```

è¿™ä¸ªçœ‹èµ·å°±ç›¸å½“ç®€æ´ä¼˜é›…äº†ã€‚æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ª Y combinator å®ç°ä¸€ä¸ªåŒ¿åé€’å½’çš„Fibonacciå‡½æ•°ï¼š

```
coffee> fib = Y (f) -> (n) ->  if n < 2 then n else f(n-1) + f(n-2)
[Function]
coffee> index = [0..10]
[ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ]
coffee> index.map(fib)
[ 0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55 ]
```
å®ç°ä¸€ä¸ªåŒ¿åé€’å½’é˜¶ä¹˜å‡½æ•°ï¼š
```
coffee> fact = Y (f)  ->(n) -> if n==0 then 1 else n*f(n-1)
[Function]
coffee> fact(10)
3628800
```

ä¸Šé¢çš„Coffeeä»£ç çš„å‘½ä»¤è¡ŒREPLè¿è¡Œç¯å¢ƒæ­å»ºéå¸¸ç®€å•ï¼š
```
$ npm install -g coffee-script
$ coffee
coffee>
```

å¯¹CoffeeScriptæ„Ÿå…´è¶£çš„è¯»è€…ï¼Œå¯ä»¥å‚è€ƒï¼šhttp://coffee-script.org/ã€‚

ä½†æ˜¯ï¼Œè¿™ä¸ªYç»„åˆå­ è¦æ˜¯ ä½¿ç”¨ OOP è¯­è¨€ç¼–ç¨‹èŒƒå¼ï¼Œ å°±è¦æ˜¾å¾—å¤æ‚è®¸å¤šã€‚ä¸ºäº†æ›´åŠ æ·±åˆ»åœ°è®¤è¯†OOP ä¸ FPç¼–ç¨‹èŒƒå¼ï¼Œæˆ‘ä»¬ä½¿ç”¨Java 8 ä»¥åŠ Kotlin çš„å®ä¾‹æ¥è¯´æ˜ã€‚è¿™é‡Œä½¿ç”¨Javaç»™å‡ºç¤ºä¾‹çš„åŸå› ï¼Œæ˜¯ä¸ºäº†ç»™å‡ºKotlinä¸Javaè¯­è¨€ä¸Šçš„å¯¹æ¯”ï¼Œåœ¨ä¸‹ä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è¦å­¦ä¹ Kotlinä¸Javaçš„äº’æ“ä½œã€‚

é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨Javaçš„åŒ¿åå†…éƒ¨ç±»å®ç°Yç»„åˆå­ ï¼š

```kotlin
package com.easy.kotlin;

public class YCombinator {
    public static Lambda<Lambda> yCombinator(final Lambda<Lambda> f) {
        return new Lambda<Lambda>() {
            @Override
            public Lambda call(Object input) {
                final Lambda<Lambda> u = (Lambda<Lambda>)input;
                return u.call(u);
            }
        }.call(new Lambda<Lambda>() {
            @Override
            public Lambda call(Object input) {
                final Lambda<Lambda> x = (Lambda<Lambda>)input;
                return f.call(new Lambda<Object>() {
                    @Override
                    public Object call(Object input) {
                        return x.call(x).call(input);
                    }
                });
            }
        });
    }

    public static void main(String[] args) {
        Lambda<Lambda> y = yCombinator(new Lambda<Lambda>() {
            @Override
            public Lambda call(Object input) {
                final Lambda<Integer> fab = (Lambda<Integer>)input;
                return new Lambda<Integer>() {
                    @Override
                    public Integer call(Object input) {
                        Integer n = Integer.parseInt(input.toString());
                        if (n < 2) {
                            return Integer.valueOf(1);
                        } else {
                            return n * fab.call(n - 1);
                        }
                    }
                };
            }
        });
        System.out.println(y.call(10));//è¾“å‡ºï¼š 3628800
    }

    interface Lambda<E> {
        E call(Object input);
    }
}
```

è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ª`Lambda<E>`ç±»å‹ï¼Œ ç„¶åé€šè¿‡`E call(Object input)`æ–¹æ³•å®ç°è‡ªè°ƒç”¨ï¼Œæ–¹æ³•å®ç°é‡Œæœ‰å¤šå¤„è½¬å‹ä»¥åŠåµŒå¥—è°ƒç”¨ã€‚é€»è¾‘æ¯”è¾ƒç»•ï¼Œä»£ç å¯è¯»æ€§ä¹Ÿæ¯”è¾ƒå·®ã€‚å½“ç„¶ï¼Œè¿™ä¸ªé—®é¢˜æœ¬èº«ä¹Ÿæ¯”è¾ƒå¤æ‚ã€‚

æˆ‘ä»¬ä½¿ç”¨Java 8çš„Lambdaè¡¨è¾¾å¼æ¥æ”¹å†™ä¸‹åŒ¿åå†…éƒ¨ç±»ï¼š

```kotlin
package com.easy.kotlin;

public class YCombinator2 {

    public static Lambda<Lambda> yCombinator2(final Lambda<Lambda> f) {
        return ((Lambda<Lambda>)(Object input) -> {
            final Lambda<Lambda> u = (Lambda<Lambda>)input;
            return u.call(u);
        }).call(
            ((Lambda<Lambda>)(Object input) -> {
                final Lambda<Lambda> v = (Lambda<Lambda>)input;
                return f.call((Lambda<Object>)(Object p) -> {
                    return v.call(v).call(p);
                });
            })
        );

    }

    public static void main(String[] args) {
        Lambda<Lambda> y2 = yCombinator2(
            (Lambda<Lambda>)(Object input) -> {
                Lambda<Integer> fab = (Lambda<Integer>)input;
                return (Lambda<Integer>)(Object p) -> {
                    Integer n = Integer.parseInt(p.toString());
                    if (n < 2) {
                        return Integer.valueOf(1);
                    } else {
                        return n * fab.call(n - 1);
                    }
                };
            });

        System.out.println(y2.call(10));//è¾“å‡ºï¼š 3628800
    }

    interface Lambda<E> {
        E call(Object input);
    }

}

```

æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨Kotlinçš„å¯¹è±¡è¡¨è¾¾å¼ï¼ˆé¡ºä¾¿å¤ä¹ å›é¡¾ä¸€ä¸‹ä¸Šä¸€ç« èŠ‚çš„ç›¸å…³å†…å®¹ï¼‰å®ç°Yç»„åˆå­ï¼š

```kotlin
package com.easy.kotlin

/**
 * Created by jack on 2017/7/9.
 *
 * lambda f. (lambda x. (f(x x)) lambda x. (f(x x)))
 *
 * OOP YCombinator
 *
 */

object YCombinatorKt {

    fun yCombinator(f: Lambda<Lambda<*>>): Lambda<Lambda<*>> {

        return object : Lambda<Lambda<*>> {

            override fun call(n: Any): Lambda<*> {
                val u = n as Lambda<Lambda<*>>
                return u.call(u)
            }
        }.call(object : Lambda<Lambda<*>> {

            override fun call(n: Any): Lambda<*> {
                val x = n as Lambda<Lambda<*>>

                return f.call(object : Lambda<Any> {
                    override fun call(n: Any): Any {
                        return x.call(x).call(n)!!
                    }
                })
            }

        }) as Lambda<Lambda<*>>
    }

    @JvmStatic fun main(args: Array<String>) {

        val y = yCombinator(object : Lambda<Lambda<*>> {

            override fun call(n: Any): Lambda<*> {
                val fab = n as Lambda<Int>

                return object : Lambda<Int> {

                    override fun call(n: Any): Int {
                        val n = Integer.parseInt(n.toString())
                        if (n < 2) {
                            return Integer.valueOf(1)
                        } else {
                            return n * fab.call(n - 1)
                        }
                    }
                }
            }
        })

        println(y.call(10)) //è¾“å‡ºï¼š 3628800
    }

    interface Lambda<E> {
        fun call(n: Any): E
    }
}

```
å…³äºY combinatorçš„æ›´å¤šå®ç°ï¼Œå¯ä»¥å‚è€ƒï¼šhttps://gist.github.com/Jason-Chen-2017/88e13b63fa5b7c612fddf999739964b0 ï¼› å¦å¤–ï¼Œå…³äºY combinatorçš„åŸç†ä»‹ç»ï¼Œæ¨èçœ‹ã€ŠThe Little Schemer ã€‹è¿™æœ¬ä¹¦ã€‚

ä»ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºOOPä¸­çš„å¯¹æ¥å£ä»¥åŠå¤šæ€ç±»å‹ï¼Œè·ŸFPä¸­çš„å‡½æ•°çš„æ€æƒ³è¡¨è¾¾çš„ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œè¿™ä¸ªä¸œè¥¿åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å§‘ä¸”ç§°ä¹‹ä¸ºâ€œç¼–ç¨‹ä¹‹é“â€ç½¢ï¼

Y combinator ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œè®©æˆ‘ä»¬åœ¨ä¸€ä¸ªåªæ”¯æŒfirst-classå‡½æ•°ï¼Œä½†æ˜¯æ²¡æœ‰å†…å»ºé€’å½’çš„ç¼–ç¨‹è¯­è¨€é‡Œå®Œæˆé€’å½’ã€‚æ‰€ä»¥Y combinatorç»™æˆ‘ä»¬å±•ç¤ºäº†ä¸€ä¸ªè¯­è¨€å®Œå…¨å¯ä»¥å®šä¹‰é€’å½’å‡½æ•°ï¼Œå³ä½¿è¿™ä¸ªè¯­è¨€çš„å®šä¹‰ä¸€ç‚¹ä¹Ÿæ²¡æåˆ°é€’å½’ã€‚å®ƒç»™æˆ‘ä»¬å±•ç¤ºäº†ä¸€ä»¶ç¾å¦™çš„äº‹ï¼šä»…ä»…å‡½æ•°å¼ç¼–ç¨‹è‡ªå·±ï¼Œå°±å¯ä»¥è®©æˆ‘ä»¬åšåˆ°æˆ‘ä»¬ä»æ¥ä¸è®¤ä¸ºå¯ä»¥åšåˆ°çš„äº‹ï¼ˆè€Œä¸”è¿˜ä¸æ­¢è¿™ä¸€ä¸ªä¾‹å­ï¼‰ã€‚

ä¸¥è°¨è€Œç²¾å·§çš„lambdaæ¼”ç®—ä½“ç³»ï¼Œä»æœ€åŸºæœ¬çš„æ¦‚å¿µâ€œå‡½æ•°â€å…¥æ‰‹ï¼Œåˆ›é€ å‡ºä¸€ä¸ªç»šçƒ‚è€Œå®ä¼Ÿçš„ä¸–ç•Œï¼Œè¿™ä¸èƒ½ä¸è¯´æ˜¯äººç±»æ€ç»´çš„éª„å‚²ã€‚

#### æ²¡æœ‰"å‰¯ä½œç”¨"

![Kotlinæç®€æ•™ç¨‹](http://upload-images.jianshu.io/upload_images/1233356-91bb4b9f0c01c594.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æ‰€è°“"å‰¯ä½œç”¨"ï¼ˆside effectï¼‰ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°å†…éƒ¨ä¸å¤–éƒ¨äº’åŠ¨ï¼ˆæœ€å…¸å‹çš„æƒ…å†µï¼Œå°±æ˜¯ä¿®æ”¹å…¨å±€å˜é‡çš„å€¼ï¼‰ï¼Œäº§ç”Ÿè¿ç®—ä»¥å¤–çš„å…¶ä»–ç»“æœã€‚

å‡½æ•°å¼ç¼–ç¨‹å¼ºè°ƒæ²¡æœ‰"å‰¯ä½œç”¨"ï¼Œæ„å‘³ç€å‡½æ•°è¦ä¿æŒç‹¬ç«‹ï¼Œæ‰€æœ‰åŠŸèƒ½å°±æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å€¼ï¼Œæ²¡æœ‰å…¶ä»–è¡Œä¸ºï¼Œå°¤å…¶æ˜¯ä¸å¾—ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ã€‚

å‡½æ•°å¼ç¼–ç¨‹çš„åŠ¨æœºï¼Œä¸€å¼€å§‹å°±æ˜¯ä¸ºäº†å¤„ç†è¿ç®—ï¼ˆcomputationï¼‰ï¼Œä¸è€ƒè™‘ç³»ç»Ÿçš„è¯»å†™ï¼ˆI/Oï¼‰ã€‚"è¯­å¥"å±äºå¯¹ç³»ç»Ÿçš„è¯»å†™æ“ä½œï¼Œæ‰€ä»¥å°±è¢«æ’æ–¥åœ¨å¤–ã€‚

å½“ç„¶ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œä¸åšI/Oæ˜¯ä¸å¯èƒ½çš„ã€‚å› æ­¤ï¼Œç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°å¼ç¼–ç¨‹åªè¦æ±‚æŠŠI/Oé™åˆ¶åˆ°æœ€å°ï¼Œä¸è¦æœ‰ä¸å¿…è¦çš„è¯»å†™è¡Œä¸ºï¼Œä¿æŒè®¡ç®—è¿‡ç¨‹çš„å•çº¯æ€§ã€‚

å‡½æ•°å¼ç¼–ç¨‹åªæ˜¯è¿”å›æ–°çš„å€¼ï¼Œä¸ä¿®æ”¹ç³»ç»Ÿå˜é‡ã€‚å› æ­¤ï¼Œä¸ä¿®æ”¹å˜é‡ï¼Œä¹Ÿæ˜¯å®ƒçš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹ã€‚

åœ¨å…¶ä»–ç±»å‹çš„è¯­è¨€ä¸­ï¼Œå˜é‡å¾€å¾€ç”¨æ¥ä¿å­˜"çŠ¶æ€"ï¼ˆstateï¼‰ã€‚ä¸ä¿®æ”¹å˜é‡ï¼Œæ„å‘³ç€çŠ¶æ€ä¸èƒ½ä¿å­˜åœ¨å˜é‡ä¸­ã€‚å‡½æ•°å¼ç¼–ç¨‹ä½¿ç”¨å‚æ•°ä¿å­˜çŠ¶æ€ï¼Œæœ€å¥½çš„ä¾‹å­å°±æ˜¯é€’å½’ã€‚

#### å¼•ç”¨é€æ˜æ€§

å‡½æ•°ç¨‹åºé€šå¸¸è¿˜åŠ å¼ºå¼•ç”¨é€æ˜æ€§ï¼Œå³å¦‚æœæä¾›åŒæ ·çš„è¾“å…¥ï¼Œé‚£ä¹ˆå‡½æ•°æ€»æ˜¯è¿”å›åŒæ ·çš„ç»“æœã€‚å°±æ˜¯è¯´ï¼Œè¡¨è¾¾å¼çš„å€¼ä¸ä¾èµ–äºå¯ä»¥æ”¹å˜å€¼çš„å…¨å±€çŠ¶æ€ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä»å½¢å¼ä¸Šé€»è¾‘æ¨æ–­ç¨‹åºè¡Œä¸ºã€‚å› ä¸ºè¡¨è¾¾å¼çš„æ„ä¹‰åªå–å†³äºå…¶å­è¡¨è¾¾å¼è€Œä¸æ˜¯è®¡ç®—é¡ºåºæˆ–è€…å…¶ä»–è¡¨è¾¾å¼çš„å‰¯ä½œç”¨ã€‚è¿™æœ‰åŠ©äºæˆ‘ä»¬æ¥éªŒè¯ä»£ç æ­£ç¡®æ€§ã€ç®€åŒ–ç®—æ³•ï¼Œæœ‰åŠ©äºæ‰¾å‡ºä¼˜åŒ–å®ƒçš„æ–¹æ³•ã€‚

## 8.2 åœ¨Kotlinä¸­ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹

å¥½äº†äº²ï¼Œå‰æ–‡ä¸­æˆ‘ä»¬åœ¨å‡½æ•°å¼ç¼–ç¨‹çš„ä¸–ç•Œé‡Œé¨æ¸¸äº†ä¸€ç•ªï¼Œç°åœ¨æˆ‘ä»¬æŠŠæ€ç»ªæ”¶å›æ¥ï¼Œæ”¾åˆ°åœ¨Kotlinä¸­çš„å‡½æ•°å¼ç¼–ç¨‹ä¸­æ¥ã€‚

ä¸¥æ ¼çš„é¢å‘å¯¹è±¡çš„è§‚ç‚¹ï¼Œä½¿å¾—å¾ˆå¤šé—®é¢˜çš„è§£å†³æ–¹æ¡ˆå˜å¾—è¾ƒä¸ºç¬¨æ‹™ã€‚ä¸ºäº†å°†ä¸€è¡Œæœ‰ç”¨çš„ä»£ç åŒ…è£…åˆ°Runnableæˆ–è€…Callable è¿™ä¸¤ä¸ªJavaä¸­æœ€æµè¡Œçš„å‡½æ•°å¼ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸å¾—ä¸å»å†™äº”å…­è¡Œæ¨¡æ¿èŒƒä¾‹ä»£ç ã€‚ä¸ºäº†è®©äº‹æƒ…ç®€å•åŒ–ï¼ˆåœ¨Java 8ä¸­ï¼Œå¢åŠ Lambdaè¡¨è¾¾å¼çš„æ”¯æŒï¼‰ï¼Œæˆ‘ä»¬åœ¨Kotlinä¸­ä½¿ç”¨æ™®é€šçš„å‡½æ•°æ¥æ›¿ä»£å‡½æ•°å¼æ¥å£ã€‚äº‹å®ä¸Šï¼Œå‡½æ•°å¼ç¼–ç¨‹ä¸­çš„å‡½æ•°ï¼Œæ¯”Cè¯­è¨€ä¸­çš„å‡½æ•°æˆ–è€…Javaä¸­çš„æ–¹æ³•éƒ½è¦å¼ºå¤§çš„å¤šã€‚

åœ¨Kotlinä¸­ï¼Œæ”¯æŒå‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘ã€‚å®ƒæ”¯æŒé«˜é˜¶å‡½æ•°ã€Lambdaè¡¨è¾¾å¼ç­‰ã€‚æˆ‘ä»¬ä¸ä»…å¯ä»¥æŠŠå‡½æ•°å½“åšæ™®é€šå˜é‡ä¸€æ ·ä¼ é€’ã€è¿”å›ï¼Œè¿˜å¯ä»¥æŠŠå®ƒåˆ†é…ç»™å˜é‡ã€æ”¾è¿›æ•°æ®ç»“æ„æˆ–è€…è¿›è¡Œä¸€èˆ¬æ€§çš„æ“ä½œã€‚å®ƒä»¬å¯ä»¥æ˜¯æœªç»å‘½åçš„ï¼Œä¹Ÿå°±æ˜¯åŒ¿åå‡½æ•°ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥æŠŠä¸€æ®µä»£ç ä¸¢åˆ° `{}`ä¸­ï¼Œè¿™å°±æ˜¯é—­åŒ…ã€‚

åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œå…¶å®æˆ‘ä»¬å·²ç»æ¶‰åŠåˆ°ä¸€äº›å…³äºå‡½æ•°çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å°†åœ¨è¿™é‡Œç³»ç»Ÿåœ°å­¦ä¹ ä¸€ä¸‹Kotlinçš„å‡½æ•°å¼ç¼–ç¨‹ã€‚

### 8.2.1 Kotlinä¸­çš„å‡½æ•°

é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹Kotlinä¸­å‡½æ•°çš„æ¦‚å¿µã€‚

#### å‡½æ•°å£°æ˜

Kotlin ä¸­çš„å‡½æ•°ä½¿ç”¨ *fun* å…³é”®å­—å£°æ˜

```kotlin
fun double(x: Int): Int {
    return 2*x
}
```

#### å‡½æ•°ç”¨æ³•

è°ƒç”¨å‡½æ•°ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹æ³•

```kotlin
fun test() {
        val doubleTwo = double(2)
        println("double(2) = $doubleTwo")
    }
```

è¾“å‡ºï¼šdouble(2) = 4

è°ƒç”¨æˆå‘˜å‡½æ•°ä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•

```kotlin
object FPBasics {

    fun double(x: Int): Int {
        return 2 * x
    }

    fun test() {
        val doubleTwo = double(2)
        println("double(2) = $doubleTwo")
    }
}

fun main(args: Array<String>) {
    FPBasics.test()
}
```
æˆ‘ä»¬è¿™é‡Œç›´æ¥ç”¨objectå¯¹è±¡FPBasicsæ¥æ¼”ç¤ºã€‚

### 8.2.2  æ‰©å±•å‡½æ•°

é€šè¿‡ æ‰©å±• å£°æ˜å®Œæˆä¸€ä¸ªç±»çš„æ–°åŠŸèƒ½ æ‰©å±• ï¼Œè€Œæ— éœ€ç»§æ‰¿è¯¥ç±»æˆ–ä½¿ç”¨è®¾è®¡æ¨¡å¼(ä¾‹å¦‚ï¼Œè£…é¥°è€…æ¨¡å¼)ã€‚ 

ä¸€ä¸ªæ‰©å±•Stringç±»çš„swapå‡½æ•°çš„ä¾‹å­ï¼š

```kotlin
fun String.swap(index1: Int, index2: Int): String {
    val charArray = this.toCharArray()
    val tmp = charArray[index1]
    charArray[index1] = charArray[index2]
    charArray[index2] = tmp

    return charArrayToString(charArray)
}

fun charArrayToString(charArray: CharArray): String {
    var result = ""
    charArray.forEach { it -> result = result + it }
    return result
}
```

è¿™ä¸ª this å…³é”®å­—åœ¨æ‰©å±•å‡½æ•°å†…éƒ¨å¯¹åº”åˆ°æ¥æ”¶è€…å¯¹è±¡ï¼ˆä¼ è¿‡æ¥çš„åœ¨ç‚¹ç¬¦å·å‰çš„å¯¹è±¡ï¼‰ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å¯¹ä»»æ„ String è°ƒç”¨è¯¥å‡½æ•°äº†ï¼š

```
val str = "abcd"
val swapStr = str.swap(0, str.lastIndex)
println("str.swap(0, str.lastIndex) = $swapStr")
```
è¾“å‡ºï¼š str.swap(0, str.lastIndex) = dbca

### 8.2.3   ä¸­ç¼€å‡½æ•°

åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ï¼Œå‡½æ•°è¿˜å¯ä»¥ç”¨ä¸­ç¼€è¡¨ç¤ºæ³•è°ƒç”¨ï¼š

* æˆå‘˜å‡½æ•°æˆ–æ‰©å±•å‡½æ•°
* åªæœ‰ä¸€ä¸ªå‚æ•°
* ç”¨ `infix` å…³é”®å­—æ ‡æ³¨

ä¾‹å¦‚ï¼Œç»™ Int å®šä¹‰æ‰©å±•

```kotlin
infix fun Int.shl(x: Int): Int {
 ...
}
```
ç”¨ä¸­ç¼€è¡¨ç¤ºæ³•è°ƒç”¨æ‰©å±•å‡½æ•°ï¼š
```
1 shl 2
```

ç­‰åŒäºè¿™æ ·
```
1.shl(2)
```

###  8.2.4  å‡½æ•°å‚æ•°

å‡½æ•°å‚æ•°ä½¿ç”¨ Pascal è¡¨ç¤ºæ³•å®šä¹‰ï¼Œå³ *name*: *type*ã€‚å‚æ•°ç”¨é€—å·éš”å¼€ã€‚æ¯ä¸ªå‚æ•°å¿…é¡»æ˜¾å¼æŒ‡å®šå…¶ç±»å‹ã€‚

```kotlin
fun powerOf(number: Int, exponent: Int): Int {
    return Math.pow(number.toDouble(), exponent.toDouble()).toInt()
}
```
æµ‹è¯•ä»£ç ï¼š
```
val eight = powerOf(2, 3)
println("powerOf(2,3) = $eight")
```
è¾“å‡ºï¼špowerOf(2,3) = 8

#### é»˜è®¤å‚æ•°

å‡½æ•°å‚æ•°å¯ä»¥æœ‰é»˜è®¤å€¼ï¼Œå½“çœç•¥ç›¸åº”çš„å‚æ•°æ—¶ä½¿ç”¨é»˜è®¤å€¼ã€‚è¿™å¯ä»¥å‡å°‘é‡è½½æ•°é‡ã€‚

```kotlin
fun add(x: Int = 0, y: Int = 0): Int {
    return x + y
}
```

é»˜è®¤å€¼é€šè¿‡ç±»å‹åé¢çš„ **=** åŠç»™å‡ºçš„å€¼æ¥å®šä¹‰ã€‚

æµ‹è¯•ä»£ç ï¼š
```
val zero = add()
val one = add(1)
val two = add(1, 1)
println("add() = $zero")
println("add(1) = $one")
println("add(1, 1) = $two")
```
è¾“å‡ºï¼š
```
add() = 0
add(1) = 1
add(1, 1) = 2
```
å¦å¤–ï¼Œè¦†ç›–å¸¦é»˜è®¤å‚æ•°çš„å‡½æ•°æ—¶ï¼Œæ€»æ˜¯ä½¿ç”¨ä¸åŸºç±»å‹æ–¹æ³•ç›¸åŒçš„é»˜è®¤å‚æ•°å€¼ã€‚
å½“è¦†ç›–ä¸€ä¸ªå¸¦æœ‰é»˜è®¤å‚æ•°å€¼çš„æ–¹æ³•æ—¶ï¼Œç­¾åä¸­ä¸å¸¦é»˜è®¤å‚æ•°å€¼ï¼š

```kotlin
open class DefaultParamBase {
    open fun add(x: Int = 0, y: Int = 0): Int {
        return x + y
    }
}

class DefaultParam : DefaultParamBase() {
    override fun add(x: Int, y: Int): Int { // ä¸èƒ½æœ‰é»˜è®¤å€¼
        return super.add(x, y)
    }
}
```

#### å‘½åå‚æ•°

å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶ä½¿ç”¨å‘½åçš„å‡½æ•°å‚æ•°ã€‚å½“ä¸€ä¸ªå‡½æ•°æœ‰å¤§é‡çš„å‚æ•°æˆ–é»˜è®¤å‚æ•°æ—¶è¿™ä¼šéå¸¸æ–¹ä¾¿ã€‚

ç»™å®šä»¥ä¸‹å‡½æ•°

```kotlin
fun reformat(str: String,
             normalizeCase: Boolean = true,
             upperCaseFirstLetter: Boolean = true,
             divideByCamelHumps: Boolean = false,
             wordSeparator: Char = ' ') {

}
```

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é»˜è®¤å‚æ•°æ¥è°ƒç”¨å®ƒ

```kotlin
reformat(str)
```

ç„¶è€Œï¼Œå½“ä½¿ç”¨éé»˜è®¤å‚æ•°è°ƒç”¨å®ƒæ—¶ï¼Œè¯¥è°ƒç”¨çœ‹èµ·æ¥å°±åƒ

```kotlin
reformat(str, true, true, false, '_')
```

ä½¿ç”¨å‘½åå‚æ•°æˆ‘ä»¬å¯ä»¥ä½¿ä»£ç æ›´å…·æœ‰å¯è¯»æ€§

```kotlin
reformat(str,
    normalizeCase = true,
    upperCaseFirstLetter = true,
    divideByCamelHumps = false,
    wordSeparator = '_'
)
```

å¹¶ä¸”å¦‚æœæˆ‘ä»¬ä¸éœ€è¦æ‰€æœ‰çš„å‚æ•°

```kotlin
reformat(str, wordSeparator = '_')
```

#### å¯å˜æ•°é‡çš„å‚æ•°ï¼ˆVarargsï¼‰

å‡½æ•°çš„å‚æ•°ï¼ˆé€šå¸¸æ˜¯æœ€åä¸€ä¸ªï¼‰å¯ä»¥ç”¨ `vararg` ä¿®é¥°ç¬¦æ ‡è®°ï¼š

```kotlin
fun <T> asList(vararg ts: T): List<T> {
    val result = ArrayList<T>()
    for (t in ts) // ts is an Array
        result.add(t)
    return result
}
```

å…è®¸å°†å¯å˜æ•°é‡çš„å‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼š

```kotlin
val list = asList(1, 2, 3)
```

### 8.2.5 å‡½æ•°è¿”å›ç±»å‹

#### å‡½æ•°è¿”å›ç±»å‹éœ€è¦æ˜¾å¼å£°æ˜

å…·æœ‰å—ä»£ç ä½“çš„å‡½æ•°å¿…é¡»å§‹ç»ˆæ˜¾å¼æŒ‡å®šè¿”å›ç±»å‹ï¼Œé™¤éä»–ä»¬æ—¨åœ¨è¿”å› `Unit`ã€‚

Kotlin ä¸æ¨æ–­å…·æœ‰å—ä»£ç ä½“çš„å‡½æ•°çš„è¿”å›ç±»å‹ï¼Œå› ä¸ºè¿™æ ·çš„å‡½æ•°åœ¨ä»£ç ä½“ä¸­å¯èƒ½æœ‰å¤æ‚çš„æ§åˆ¶æµï¼Œå¹¶ä¸”è¿”å›ç±»å‹å¯¹äºè¯»è€…ï¼ˆæœ‰æ—¶å¯¹äºç¼–è¯‘å™¨ï¼‰ä¹Ÿæ˜¯ä¸æ˜æ˜¾çš„ã€‚

####  è¿”å› Unit çš„å‡½æ•°

å¦‚æœä¸€ä¸ªå‡½æ•°ä¸è¿”å›ä»»ä½•æœ‰ç”¨çš„å€¼ï¼Œå®ƒçš„è¿”å›ç±»å‹æ˜¯ `Unit`ã€‚`Unit` æ˜¯ä¸€ç§åªæœ‰ä¸€ä¸ª`Unit` å€¼çš„ç±»å‹ã€‚è¿™ä¸ªå€¼ä¸éœ€è¦æ˜¾å¼è¿”å›:

```kotlin
fun printHello(name: String?): Unit {
    if (name != null)
        println("Hello ${name}")
    else
        println("Hi there!")
    // `return Unit` æˆ–è€… `return` æ˜¯å¯é€‰çš„
}
```

`Unit` è¿”å›ç±»å‹å£°æ˜ä¹Ÿæ˜¯å¯é€‰çš„ã€‚ä¸Šé¢çš„ä»£ç ç­‰åŒäº

```kotlin
fun printHello(name: String?) {
    .....
}
```

### 8.2.6 å•è¡¨è¾¾å¼å‡½æ•°

å½“å‡½æ•°è¿”å›å•ä¸ªè¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥çœç•¥èŠ±æ‹¬å·å¹¶ä¸”åœ¨ **=** ç¬¦å·ä¹‹åæŒ‡å®šä»£ç ä½“å³å¯

```kotlin
fun double(x: Int): Int = x * 2
```

å½“è¿”å›å€¼ç±»å‹å¯ç”±ç¼–è¯‘å™¨æ¨æ–­æ—¶ï¼Œæ˜¾å¼å£°æ˜è¿”å›ç±»å‹æ˜¯å¯é€‰çš„:

```kotlin
fun double(x: Int) = x * 2
```

### 8.2.7 å‡½æ•°ä½œç”¨åŸŸ

åœ¨ Kotlin ä¸­å‡½æ•°å¯ä»¥åœ¨æ–‡ä»¶é¡¶å±‚å£°æ˜ï¼Œè¿™æ„å‘³ç€ä½ ä¸éœ€è¦åƒä¸€äº›è¯­è¨€å¦‚ Javaã€C# æˆ– Scala é‚£æ ·åˆ›å»ºä¸€ä¸ªç±»æ¥ä¿å­˜ä¸€ä¸ªå‡½æ•°ã€‚æ­¤å¤–é™¤äº†é¡¶å±‚å‡½æ•°ï¼ŒKotlin ä¸­å‡½æ•°ä¹Ÿå¯ä»¥å£°æ˜åœ¨å±€éƒ¨ä½œç”¨åŸŸã€ä½œä¸ºæˆå‘˜å‡½æ•°ä»¥åŠæ‰©å±•å‡½æ•°ã€‚

#### å±€éƒ¨å‡½æ•°ï¼ˆåµŒå¥—å‡½æ•°ï¼‰

Kotlin æ”¯æŒå±€éƒ¨å‡½æ•°ï¼Œå³ä¸€ä¸ªå‡½æ•°åœ¨å¦ä¸€ä¸ªå‡½æ•°å†…éƒ¨

```kotlin
fun sum(x: Int, y: Int, z: Int): Int {
    val delta = 0;
    fun add(a: Int, b: Int): Int {
        return a + b + delta
    }
    return add(x + add(y, z))
}
```

å±€éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°ï¼ˆå³é—­åŒ…ï¼‰ä¸­çš„å±€éƒ¨å˜é‡deltaã€‚

```kotlin
println("sum(1,2,3) = ${sum(0, 1, 2, 3)}")
```
è¾“å‡ºï¼š

sum(1,2,3) = 6

#### æˆå‘˜å‡½æ•°

æˆå‘˜å‡½æ•°æ˜¯åœ¨ç±»æˆ–å¯¹è±¡å†…éƒ¨å®šä¹‰çš„å‡½æ•°

```kotlin
class Sample() {
    fun foo() { print("Foo") }
}
```

æˆå‘˜å‡½æ•°ä»¥ç‚¹è¡¨ç¤ºæ³•è°ƒç”¨

```kotlin
Sample().foo() // åˆ›å»ºç±» Sample å®ä¾‹å¹¶è°ƒç”¨ foo
```

### 8.2.8 æ³›å‹å‡½æ•°

å‡½æ•°å¯ä»¥æœ‰æ³›å‹å‚æ•°ï¼Œé€šè¿‡åœ¨å‡½æ•°åå‰ä½¿ç”¨å°–æ‹¬å·æŒ‡å®šã€‚

ä¾‹å¦‚Iterableçš„mapå‡½æ•°ï¼š

```kotlin
public inline fun <T, R> Iterable<T>.map(transform: (T) -> R): List<R> {
    return mapTo(ArrayList<R>(collectionSizeOrDefault(10)), transform)
}
```

### 8.2.9  é«˜é˜¶å‡½æ•°

é«˜é˜¶å‡½æ•°æ˜¯å°†å‡½æ•°ç”¨ä½œå‚æ•°æˆ–è¿”å›å€¼çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼ŒIterableçš„filterå‡½æ•°ï¼š

```
public inline fun <T> Iterable<T>.filter(predicate: (T) -> Boolean): List<T> {
    return filterTo(ArrayList<T>(), predicate)
}
```
å®ƒçš„è¾“å…¥å‚æ•°`predicate: (T) -> Boolean`å°±æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å…¶ä¸­ï¼Œå‡½æ•°ç±»å‹å£°æ˜çš„è¯­æ³•æ˜¯ï¼š
```
(X)->Y
```
è¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ˜¯ä»ç±»å‹Xåˆ°ç±»å‹Yçš„æ˜ å°„ã€‚å³è¿™ä¸ªå‡½æ•°è¾“å…¥Xç±»å‹ï¼Œè¾“å‡ºYç±»å‹ã€‚

è¿™ä¸ªå‡½æ•°æˆ‘ä»¬è¿™æ ·è°ƒç”¨ï¼š
```kotlin
fun isOdd(x: Int): Boolean {
    return x % 2 == 1
}

val list = listOf(1, 2, 3, 4, 5)
list.filter(::isOdd)
```

å…¶ä¸­ï¼Œ`::`ç”¨æ¥å¼•ç”¨ä¸€ä¸ªå‡½æ•°ã€‚

### 8.2.10 åŒ¿åå‡½æ•°

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°æ¥å®ç°è¿™ä¸ªpredicateå‡½æ•°ï¼š

```
list.filter((fun(x: Int): Boolean {
    return x % 2 == 1
}))
```

### 8.2.11 Lambda è¡¨è¾¾å¼

æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ›´ç®€å•çš„Lambdaè¡¨è¾¾å¼æ¥å®ç°ä¸€ä¸ªpredicateå‡½æ•°ï¼š

```
list.filter {
    it % 2 == 1
}
```

* lambda è¡¨è¾¾å¼æ€»æ˜¯è¢«å¤§æ‹¬å· `{}` æ‹¬ç€
* å…¶å‚æ•°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰åœ¨ `->` ä¹‹å‰å£°æ˜ï¼ˆå‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼‰
* å‡½æ•°ä½“ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰åœ¨ `->` åé¢

ä¸Šé¢çš„å†™æ³•è·Ÿï¼š

```
list.filter({
    it % 2 == 1
})
```

ç­‰ä»·ï¼Œå¦‚æœ lambda æ˜¯è¯¥è°ƒç”¨çš„å”¯ä¸€å‚æ•°ï¼Œåˆ™è°ƒç”¨ä¸­çš„åœ†æ‹¬å·å¯ä»¥çœç•¥ã€‚

ä½¿ç”¨Lambdaè¡¨è¾¾å¼å®šä¹‰ä¸€ä¸ªå‡½æ•°å­—é¢å€¼ï¼š
```
>>> val sum = { x: Int, y: Int -> x + y }
>>> sum(1,1)
2

```
æˆ‘ä»¬åœ¨ä½¿ç”¨åµŒå¥—çš„Lambdaè¡¨è¾¾å¼æ¥å®šä¹‰ä¸€ä¸ªæŸ¯é‡ŒåŒ–çš„sumå‡½æ•°ï¼š
```
>>> val sum = {x:Int ->  {y:Int -> x+y }}
>>> sum
(kotlin.Int) -> (kotlin.Int) -> kotlin.Int
>>> sum(1)(1)
2
```

### 8.2.11 `it`ï¼šå•ä¸ªå‚æ•°çš„éšå¼åç§°

Kotlinä¸­å¦ä¸€ä¸ªæœ‰ç”¨çš„çº¦å®šæ˜¯ï¼Œå¦‚æœå‡½æ•°å­—é¢å€¼åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œ
é‚£ä¹ˆå®ƒçš„å£°æ˜å¯ä»¥çœç•¥ï¼ˆè¿åŒ `->`ï¼‰ï¼Œå…¶åç§°æ˜¯ `it`ã€‚

ä»£ç ç¤ºä¾‹ï¼š

```kotlin
>>> val list = listOf(1,2,3,4,5)
>>> list.map { it * 2 }
[2, 4, 6, 8, 10]
```

### 8.2.12 é—­åŒ…ï¼ˆClosureï¼‰

Lambda è¡¨è¾¾å¼æˆ–è€…åŒ¿åå‡½æ•°ï¼Œä»¥åŠå±€éƒ¨å‡½æ•°å’Œå¯¹è±¡è¡¨è¾¾å¼ï¼ˆobject declarationsï¼‰å¯ä»¥è®¿é—®å…¶ _é—­åŒ…_ ï¼Œå³åœ¨å¤–éƒ¨ä½œç”¨åŸŸä¸­å£°æ˜çš„å˜é‡ã€‚ ä¸ Java ä¸åŒçš„æ˜¯å¯ä»¥ä¿®æ”¹é—­åŒ…ä¸­æ•è·çš„å˜é‡ï¼š

```kotlin
fun sumGTZero(c: Iterable<Int>): Int {
    var sum = 0
    c.filter { it > 0 }.forEach {
        sum += it
    }
    return sum
}

val list = listOf(1, 2, 3, 4, 5)
sumGTZero(list) // è¾“å‡º 15
```

æˆ‘ä»¬å†ä½¿ç”¨é—­åŒ…æ¥å†™ä¸€ä¸ªä½¿ç”¨Javaä¸­çš„Threadæ¥å£çš„ä¾‹å­ï¼š

```
fun closureDemo() {
    Thread({
        for (i in 1..10) {
            println("I = $i")
            Thread.sleep(1000)
        }

    }).start()

    Thread({
        for (j in 10..20) {
            println("J = $j")
            Thread.sleep(2000)
        }
        Thread.sleep(1000)
    }).start()
}
```

ä¸€ä¸ªè¾“å‡ºï¼š
```
I = 1
J = 10
I = 2
I = 3
...
J = 20
```

### 8.2.13  å¸¦æ¥æ”¶è€…çš„å‡½æ•°å­—é¢å€¼

Kotlin æä¾›äº†ä½¿ç”¨æŒ‡å®šçš„ _æ¥æ”¶è€…å¯¹è±¡_ è°ƒç”¨å‡½æ•°å­—é¢å€¼çš„åŠŸèƒ½ã€‚

ä½¿ç”¨åŒ¿åå‡½æ•°çš„è¯­æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŒ‡å®šå‡½æ•°å­—é¢å€¼çš„æ¥æ”¶è€…ç±»å‹ã€‚

ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨å¸¦æ¥æ”¶è€…çš„å‡½æ•°ç±»å‹å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå¹¶åœ¨ä¹‹åä½¿ç”¨å®ƒã€‚ä»£ç ç¤ºä¾‹ï¼š

```
>>> val sum = fun Int.(other: Int): Int = this + other
>>> 1.sum(1)
2
```

å½“æ¥æ”¶è€…ç±»å‹å¯ä»¥ä»ä¸Šä¸‹æ–‡æ¨æ–­æ—¶ï¼Œlambda è¡¨è¾¾å¼å¯ä»¥ç”¨ä½œå¸¦æ¥æ”¶è€…çš„å‡½æ•°å­—é¢å€¼ã€‚

```kotlin
class HTML {
    fun body() {
        println("HTML BODY")
    }
}

fun html(init: HTML.() -> Unit): HTML { // HTML.()ä¸­çš„HTMLæ˜¯æ¥å—è€…ç±»å‹
    val html = HTML()  // åˆ›å»ºæ¥æ”¶è€…å¯¹è±¡
    html.init()        // å°†è¯¥æ¥æ”¶è€…å¯¹è±¡ä¼ ç»™è¯¥ lambda
    return html
}
```

æµ‹è¯•ä»£ç ï¼š

```
html {
    body()
}
```
è¾“å‡ºï¼šHTML BODY

ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªHTMLçš„DSLè¯­è¨€ã€‚

### 8.2.14 å…·ä½“åŒ–çš„ç±»å‹å‚æ•°

æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è®¿é—®ä¸€ä¸ªå‚æ•°ç±»å‹ï¼š

```kotlin
fun <T> TreeNode.findParentOfType(clazz: Class<T>): T? {
    var p = parent
    while (p != null && !clazz.isInstance(p)) {
        p = p.parent
    }
    @Suppress("UNCHECKED_CAST")
    return p as T?
}
```

åœ¨è¿™é‡Œæˆ‘ä»¬å‘ä¸Šéå†ä¸€æ£µæ ‘å¹¶ä¸”æ£€æŸ¥æ¯ä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯ç‰¹å®šçš„ç±»å‹ã€‚
è¿™éƒ½æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯è°ƒç”¨å¤„ä¸æ˜¯å¾ˆä¼˜é›…ï¼š

```kotlin
treeNode.findParentOfType(MyTreeNode::class.java)
```

æˆ‘ä»¬çœŸæ­£æƒ³è¦çš„åªæ˜¯ä¼ ä¸€ä¸ªç±»å‹ç»™è¯¥å‡½æ•°ï¼Œå³åƒè¿™æ ·è°ƒç”¨å®ƒï¼š

```kotlin
treeNode.findParentOfType<MyTreeNode>()
```

ä¸ºèƒ½å¤Ÿè¿™ä¹ˆåšï¼Œå†…è”å‡½æ•°æ”¯æŒ*å…·ä½“åŒ–çš„ç±»å‹å‚æ•°*ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š

```kotlin
inline fun <reified T> TreeNode.findParentOfType(): T? {
    var p = parent
    while (p != null && p !is T) {
        p = p.parent
    }
    return p as T?
}
```

æˆ‘ä»¬ä½¿ç”¨ `reified` ä¿®é¥°ç¬¦æ¥é™å®šç±»å‹å‚æ•°ï¼Œç°åœ¨å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨è®¿é—®å®ƒäº†ï¼Œ
å‡ ä¹å°±åƒæ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»ä¸€æ ·ã€‚ç”±äºå‡½æ•°æ˜¯å†…è”çš„ï¼Œä¸éœ€è¦åå°„ï¼Œæ­£å¸¸çš„æ“ä½œç¬¦å¦‚ `!is` å’Œ `as` ç°åœ¨éƒ½èƒ½ç”¨äº†ã€‚

è™½ç„¶åœ¨è®¸å¤šæƒ…å†µä¸‹å¯èƒ½ä¸éœ€è¦åå°„ï¼Œä½†æˆ‘ä»¬ä»ç„¶å¯ä»¥å¯¹ä¸€ä¸ªå…·ä½“åŒ–çš„ç±»å‹å‚æ•°ä½¿ç”¨å®ƒï¼š

```kotlin
inline fun <reified T> membersOf() = T::class.members

fun main(s: Array<String>) {
    println(membersOf<StringBuilder>().joinToString("\n"))
}
```

æ™®é€šçš„å‡½æ•°ï¼ˆæœªæ ‡è®°ä¸ºå†…è”å‡½æ•°çš„ï¼‰æ²¡æœ‰å…·ä½“åŒ–å‚æ•°ã€‚

### 8.2.10 å°¾é€’å½’tailrec

Kotlin æ”¯æŒä¸€ç§ç§°ä¸ºå°¾é€’å½’çš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼ã€‚ è¿™å…è®¸ä¸€äº›é€šå¸¸ç”¨å¾ªç¯å†™çš„ç®—æ³•æ”¹ç”¨é€’å½’å‡½æ•°æ¥å†™ï¼Œè€Œæ— å †æ ˆæº¢å‡ºçš„é£é™©ã€‚ å½“ä¸€ä¸ªå‡½æ•°ç”¨ tailrec ä¿®é¥°ç¬¦æ ‡è®°å¹¶æ»¡è¶³æ‰€éœ€çš„å½¢å¼æ—¶ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–è¯¥é€’å½’ï¼Œç”Ÿæˆä¸€ä¸ªå¿«é€Ÿè€Œé«˜æ•ˆçš„åŸºäºå¾ªç¯çš„ç‰ˆæœ¬ã€‚

```
tailrec fun findFixPoint(x: Double = 1.0): Double
        = if (x == Math.cos(x)) x else findFixPoint(Math.cos(x)) // å‡½æ•°å¿…é¡»å°†å…¶è‡ªèº«è°ƒç”¨ä½œä¸ºå®ƒæ‰§è¡Œçš„æœ€åä¸€ä¸ªæ“ä½œ

```

è¿™æ®µä»£ç è®¡ç®—ä½™å¼¦çš„ä¸åŠ¨ç‚¹ï¼ˆfixpoint of cosineï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªæ•°å­¦å¸¸æ•°ã€‚ å®ƒåªæ˜¯é‡å¤åœ°ä» 1.0 å¼€å§‹è°ƒç”¨ Math.cosï¼Œç›´åˆ°ç»“æœä¸å†æ”¹å˜ï¼Œäº§ç”Ÿ0.7390851332151607çš„ç»“æœã€‚æœ€ç»ˆä»£ç ç›¸å½“äºè¿™ç§æ›´ä¼ ç»Ÿé£æ ¼çš„ä»£ç ï¼š
```kotlin
private fun findFixPoint(): Double {
    var x = 1.0
    while (true) {
        val y = Math.cos(x)
        if (x == y) return y
        x = y
    }
}
```

è¦ç¬¦åˆ tailrec ä¿®é¥°ç¬¦çš„æ¡ä»¶çš„è¯ï¼Œå‡½æ•°å¿…é¡»å°†å…¶è‡ªèº«è°ƒç”¨ä½œä¸ºå®ƒæ‰§è¡Œçš„æœ€åä¸€ä¸ªæ“ä½œã€‚åœ¨é€’å½’è°ƒç”¨åæœ‰æ›´å¤šä»£ç æ—¶ï¼Œä¸èƒ½ä½¿ç”¨å°¾é€’å½’ï¼Œå¹¶ä¸”ä¸èƒ½ç”¨åœ¨ try/catch/finally å—ä¸­ã€‚å°¾éƒ¨é€’å½’åœ¨ JVM åç«¯ä¸­æ”¯æŒã€‚

Kotlin è¿˜ä¸ºé›†åˆç±»å¼•å…¥äº†è®¸å¤šæ‰©å±•å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ map() å’Œ filter() å‡½æ•°å¯ä»¥æµç•…åœ°æ“çºµæ•°æ®ï¼Œå…·ä½“çš„å‡½æ•°çš„ä½¿ç”¨ä»¥åŠç¤ºä¾‹æˆ‘ä»¬å·²ç»åœ¨ é›†åˆç±» ç« èŠ‚ä¸­ä»‹ç»ã€‚

## æœ¬ç« å°ç»“

æœ¬ç« æˆ‘ä»¬ä¸€èµ·å­¦ä¹ äº†å‡½æ•°å¼ç¼–ç¨‹çš„ç®€å²ã€Lambdaæ¼”ç®—ã€Yç»„åˆå­ä¸é€’å½’ç­‰æ ¸å¿ƒå‡½æ•°å¼çš„ç¼–ç¨‹æ€æƒ³ç­‰ç›¸å…³å†…å®¹ã€‚ç„¶åé‡ç‚¹ä»‹ç»äº†åœ¨Kotlinä¸­å¦‚ä½•ä½¿ç”¨å‡½æ•°å¼é£æ ¼ç¼–ç¨‹ï¼Œå…¶ä¸­é‡ç‚¹ä»‹ç»äº†Kotlinä¸­å‡½æ•°çš„ç›¸å…³çŸ¥è¯†ï¼Œä»¥åŠé«˜é˜¶å‡½æ•°ã€Lambdaè¡¨è¾¾å¼ã€é—­åŒ…ç­‰æ ¸å¿ƒè¯­æ³•ï¼Œå¹¶ç»™å‡ºç›¸åº”çš„å®ä¾‹è¯´æ˜ã€‚

æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç«  ä¸­ä»‹ç»Kotlinçš„ è½»é‡çº§çº¿ç¨‹ï¼šåç¨‹ï¼ˆCoroutinesï¼‰çš„ç›¸å…³çŸ¥è¯†ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°åœ¨Kotlinä¸­ï¼Œç¨‹åºçš„é€»è¾‘å¯ä»¥åœ¨åç¨‹ä¸­é¡ºåºåœ°è¡¨è¾¾ï¼Œè€Œåº•å±‚åº“ä¼šä¸ºæˆ‘ä»¬è§£å†³å…¶å¼‚æ­¥æ€§ã€‚

æœ¬ç« ç¤ºä¾‹ä»£ç å·¥ç¨‹ï¼šhttps://github.com/EasyKotlin/chapter8_fp
